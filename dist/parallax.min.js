/*
Copyright (c) 2017 NAVER Corp.
@egjs/infinitegrid project is licensed under the MIT license

@egjs/infinitegrid JavaScript library
https://github.com/naver/egjs-infinitegrid

@version 3.5.3
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t.eg=t.eg||{},t.eg.Parallax=e())}(this,function(){"use strict";var r,t,s=(r="undefined"==typeof window?{document:{},navigator:{userAgent:""}}:window).document,e=r.navigator.userAgent,i=!!("addEventListener"in s),n=(function(){var t=!1;try{i&&Object.defineProperty&&s.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t=!0}}))}catch(t){}}(),/MSIE|Trident|Windows Phone|Edge/.test(e),/iPhone|iPad/.test(e),/Android 2\./.test(e),e.toLowerCase()),d=/mobi|ios|android/.test(n),o="start",a="center",_=/applewebkit\/([\d|.]*)/g.exec(n),z=(_&&parseInt(_[1],10),(t=function(){var t={transitionend:"",webkitTransitionEnd:"-webkit-",MSTransitionEnd:"-ms-",oTransitionEnd:"-o-",mozTransitionEnd:"-moz-"};for(var e in t){var i=t[e];if("on"+e.toLowerCase()in r)return[i+"transform",i+"transition",e]}return[]}())[0]);t[1],t[2];function c(t,e){var i,n;if(void 0===e&&(e=!1),"string"!=typeof t)return f(t)?i=t:(n=t,"function"==typeof r.jQuery&&n instanceof r.jQuery||n.constructor.prototype.jquery&&n.toArray?i=e?c(t.toArray(),!0):c(t.get(0),!1):Array.isArray(t)?(i=t.map(function(t){return c(t)}),e||(i=1<=i.length?i[0]:void 0)):!t.nodeName||1!==t.nodeType&&9!==t.nodeType||(i=t)),i;if(t.match(/^<([A-z]+)\s*([^>]*)>/)){var o=s.createElement("div");o.innerHTML=t,i=o.childNodes}else i=s.querySelectorAll(t);return e?function(t){var e=[];if(t)for(var i=0,n=t.length;i<n;i++)e.push(t[i]);return e}(i):i&&i[0]}function f(t){return t===r}var h={vertical:{position:"top",size:"height",cammelSize:"Height",coordinate:"Y"},horizontal:{position:"left",size:"width",cammelSize:"Width",coordinate:"X"}},l=o,A=a;return function(){function t(t,e){void 0===t&&(t=window),void 0===e&&(e={}),this.options=function(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.forEach(function(t){for(var e in t)i[e]=t[e]}),i}({container:null,selector:"img",strength:1,center:0,range:[-1,1],align:l,horizontal:!1},e),this._root=c(t),this._container=this.options.container&&c(this.options.container),this._rootSize=0,this._containerPosition=0,this._style=h[this.options.horizontal?"horizontal":"vertical"],this.resize()}var e=t.prototype;return e.resize=function(t){var e=this;void 0===t&&(t=[]);var i=this._root,n=this._container,o=this._style.position,r=this._style.cammelSize;if(n&&i!==n){var s=(f(i)?document.body:i).getBoundingClientRect(),a=n.getBoundingClientRect();this._containerPosition=a[o]-s[o]}else this._containerPosition=0;if(this._rootSize=f(i)?window["inner"+r]||document.documentElement["client"+r]:i["client"+r],d&&f(i)){var _=document.body.offsetWidth||document.documentElement.offsetWidth,c=window.innerWidth;this._rootSize=this._rootSize/(_/c)}return t.forEach(function(t){e._checkParallaxItem(t.el)}),this},e.refresh=function(t,c){var d=this;void 0===t&&(t=[]),void 0===c&&(c=0);var e=this._style,f=e.position,h=e.coordinate,l=e.size,i=this.options,u=i.strength,v=i.center,m=i.range,p=i.align,y=this._rootSize,g=c+y,E=this._containerPosition;return t.forEach(function(t){if(t.rect&&t.size&&t.el){var e=E+t.rect[f];if(!(e+(t.rect[l]||t.size[l])<c||g<e)){var i=t.el;if(i.__IMAGE__||d._checkParallaxItem(i),-1!==i.__IMAGE__){var n=i.__IMAGE__,o=i.__BOX__.__SIZE__,r=n.__SIZE__;if(r<=o)n.style[z]="";else{var s=(c+y/2-(y+o)/2*v-(e+o/2))/(y+o)*2*u,a=(o-r)/2,_=a*(1-(s=Math.max(Math.min(s,m[1]),m[0])));p===A&&(_-=a),n.__TRANSLATE__=_,n.__RATIO__=s,n.style[z]="translate"+h+"("+_+"px)"}}}}}),this},e._checkParallaxItem=function(t){if(t){var e=this.options.selector;if(!t.__IMAGE__){var i=t.querySelector(e);if(t.__IMAGE__=i||-1,-1===t.__IMAGE__)return;t.__BOX__=i.parentNode}if(-1!==t.__IMAGE__){var n=this._style.cammelSize;t.__IMAGE__.__SIZE__=t.__IMAGE__["offset"+n],t.__BOX__.__SIZE__=t.__BOX__["offset"+n]}}},t}()});
//# sourceMappingURL=parallax.min.js.map
