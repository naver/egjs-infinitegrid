/*!
 * Copyright (c) 2017 NAVER Corp.
 * @egjs/infinitegrid project is licensed under the MIT license
 * 
 * @egjs/infinitegrid JavaScript library
 * https://github.com/naver/egjs-infinitegrid
 * 
 * @version 3.0.0-rc
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Parallax=t():(e.eg=e.eg||{},e.eg.Parallax=t())}(this,function(){return function(e){function __webpack_require__(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,i){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(e,t,i){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},n=navigator.userAgent,_=-1!==n.indexOf("Mobi")||/ios|android/.test(n),o=function(e){return e===window},a={vertical:{position:"top",size:"height",cammelSize:"Height",coordinate:"Y"},horizontal:{position:"left",size:"width",cammelSize:"Width",coordinate:"X"}},s="start",c=function(){function Parallax(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:window,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Parallax),this.options=r({container:null,selector:"img",strength:1,center:0,range:[-1,1],align:s,horizontal:!1,threshold:50},t),this._root=e,this._rootSize=0,this._containerPosition=0,this._style=a[this.options.horizontal?"horizontal":"vertical"],this.resize()}return Parallax.prototype._checkParallaxItem=function(e){if(e){var t=this.options.selector;if(!e.__IMAGE__){var i=e.querySelector(t);if(e.__IMAGE__=i||-1,-1===e.__IMAGE__)return;e.__BOX__=i.parentNode}if(-1!==e.__IMAGE__){var r=this._style.cammelSize;e.__IMAGE__.__SIZE__=e.__IMAGE__["offset"+r],e.__BOX__.__SIZE__=e.__BOX__["offset"+r]}}},Parallax.prototype.resize=function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],i=this._root,r=this.options.container,n=this._style.position,a=this._style.cammelSize;if(r&&i!==r){var s=(o(i)?document.body:i).getBoundingClientRect(),c=r.getBoundingClientRect();this._containerPosition=c[n]-s[n]}else this._containerPosition=0;if(this._rootSize=o(i)?window["inner"+a]||document.documentElement["client"+a]:i["client"+a],_&o(i)){var l=document.body.offsetWidth||document.documentElement.offsetWidth,u=window.innerWidth;this._rootSize=this._rootSize/(l/u)}t.forEach(function(t){e._checkParallaxItem(t.el)})},Parallax.prototype.refresh=function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,r=this._style,n=r.position,_=r.coordinate,o=r.size,a=this.options,s=a.strength,c=a.center,l=a.range,u=a.align,f=a.threshold,h=this._rootSize,p=i+h,d=this._containerPosition;t.forEach(function(t){if(t.rect&&t.size&&t.el){var r=d+t.rect[n],a=t.rect[o]||t.size[o];if(!(i>r+a+f||p<r-f)){var m=t.el;if(m.__IMAGE__||e._checkParallaxItem(m),-1!==m.__IMAGE__){var g=m.__IMAGE__,w=m.__BOX__.__SIZE__,b=g.__SIZE__;if(w>=b)g.style.transform="";else{var x=(i+h/2-(h+w)/2*c-(r+w/2))/(h+w)*2*s,y=(w-b)/2,v=y*(1-(x=Math.max(Math.min(x,l[1]),l[0])));"center"===u&&(v-=y),g.__TRANSLATE__=v,g.__RATIO__=x,g.style.transform="translate"+_+"("+v+"px)"}}}}})},Parallax}();e.exports=c}])});
//# sourceMappingURL=parallax.js.map