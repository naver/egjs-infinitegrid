/*
Copyright (c) 2015 NAVER Corp.
name: @egjs/infinitegrid
license: MIT
author: NAVER Corp.
repository: https://github.com/naver/egjs-infinitegrid
version: 4.2.0
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).InfiniteGrid=e()}(this,function(){"use strict";var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var _=function(){return(_=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function E(t,e){var n={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function n(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;0<=a;a--)(r=t[a])&&(s=(o<3?r(s):3<o?r(e,n,s):r(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}function l(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&i>=t.length?void 0:t)&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}(arguments[e]));return t}function f(t){return void 0===t}var r=function(){function t(t,e){var n,i;if(this.eventType=t,this._canceled=!1,e)try{for(var r=l(Object.keys(e)),o=r.next();!o.done;o=r.next()){var s=o.value;this[s]=e[s]}}catch(t){n={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}var e=t.prototype;return e.stop=function(){this._canceled=!0},e.isCanceled=function(){return this._canceled},t}(),a=function(){function t(){this._eventHandler={}}var e=t.prototype;return e.trigger=function(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];var i=e instanceof r?e.eventType:e,i=s(this._eventHandler[i]||[]);return i.length<=0||(e instanceof r?(e.currentTarget=this,i.forEach(function(t){t(e)})):i.forEach(function(t){t.apply(void 0,s(n))})),this},e.once=function(n,i){var r,o=this;if("object"==typeof n&&f(i)){var t,e=n;for(t in e)this.once(t,e[t]);return this}return"string"==typeof n&&"function"==typeof i&&this.on(n,r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.apply(void 0,s(t)),o.off(n,r)}),this},e.hasOn=function(t){return!!this._eventHandler[t]},e.on=function(t,e){if("object"==typeof t&&f(e)){var n,i=t;for(n in i)this.on(n,i[n]);return this}var r;return"string"==typeof t&&"function"==typeof e&&(r=this._eventHandler[t],f(r)&&(this._eventHandler[t]=[],r=this._eventHandler[t]),r.push(e)),this},e.off=function(t,e){var n,i;if(f(t))return this._eventHandler={},this;if(f(e)){if("string"==typeof t)return delete this._eventHandler[t],this;var r,o=t;for(r in o)this.off(r,o[r]);return this}var s=this._eventHandler[t];if(s){var a=0;try{for(var u=l(s),c=u.next();!c.done;c=u.next()){if(c.value===e){s.splice(a,1),s.length<=0&&delete this._eventHandler[t];break}a++}}catch(t){n={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}return this},t.VERSION="3.0.1",t}(),z=r,u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function c(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var d=function(){return(d=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};var t="undefined"!=typeof window,e=t?window.navigator.userAgent:"",p=t&&!!("getComputedStyle"in window),g=/MSIE|Trident|Windows Phone|Edge/.test(e),m=t&&!!("addEventListener"in document),y="width",v="height";function R(t,e){return t.getAttribute(e)||""}function S(t){return[].slice.call(t)}function I(t,e){return void 0===e&&(e="data-"),"loading"in t&&"lazy"===t.getAttribute("loading")||!!t.getAttribute(e+"lazy")}function C(t,e,n){m?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function O(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function P(t,e){var n=t["client"+e]||t["offset"+e];return parseFloat(n||(t=t,((p?window.getComputedStyle(t):t.currentStyle)||{})[e.toLowerCase()]))||0}function T(t,e,n){var i=S(t.querySelectorAll(function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),r=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}(["["+n+"skip] ["+n+"width]"],e.map(function(t){return["["+n+"skip] "+t,t+"["+n+"skip]","["+n+"width] "+t].join(", ")})).join(", ")));return S(t.querySelectorAll("["+n+"width], "+e.join(", "))).filter(function(t){return-1===i.indexOf(t)})}var w=[];function b(t,e){w.length||C(window,"resize",D),t.__PREFIX__=e,w.push(t),M(t)}function M(t,e){void 0===e&&(e="data-");var n,i=t.__PREFIX__||e,r=parseInt(R(t,""+i+y),10)||0,e=parseInt(R(t,""+i+v),10)||0;R(t,i+"fixed")===v?(n=P(t,"Height")||e,t.style[y]=r/e*n+"px"):(n=P(t,"Width")||r,t.style[v]=e/r*n+"px")}function D(){w.forEach(function(t){M(t)})}var x=function(r){function t(t,e){void 0===e&&(e={});var n=r.call(this)||this;n.isReady=!1,n.isPreReady=!1,n.hasDataSize=!1,n.hasLoading=!1,n.isSkip=!1,n.onCheck=function(t){n.clear(),t&&"error"===t.type&&n.onError(n.element),n.hasLoading&&n.checkElement()||(t=!n.hasDataSize&&!n.hasLoading,n.onReady(t))},n.options=d({prefix:"data-"},e),n.element=t;var i=n.options.prefix;return n.hasDataSize=(e=i,!!t.getAttribute((e=void 0===e?"data-":e)+"width")),n.isSkip=(e=i,!!t.getAttribute((e=void 0===e?"data-":e)+"skip")),n.hasLoading=I(t,i),n}c(t,r);var e=t.prototype;return e.check=function(){return this.isSkip||!this.checkElement()?(this.onAlreadyReady(!0),!1):(this.hasDataSize&&b(this.element,this.options.prefix),(this.hasDataSize||this.hasLoading)&&this.onAlreadyPreReady(),!0)},e.addEvents=function(){var e=this,n=this.element;this.constructor.EVENTS.forEach(function(t){C(n,t,e.onCheck)})},e.clear=function(){var e=this,n=this.element;this.constructor.EVENTS.forEach(function(t){O(n,t,e.onCheck)}),this.removeAutoSizer()},e.destroy=function(){this.clear(),this.off()},e.removeAutoSizer=function(){var t,e,n;this.hasDataSize&&(n=this.options.prefix,t=this.element,e=n,(n=w.indexOf(t))<0||(e=R(t,e+"fixed"),delete t.__PREFIX__,t.style[e===v?y:v]="",w.splice(n,1),w.length||O(window,"resize",D)))},e.onError=function(t){this.trigger("error",{element:this.element,target:t})},e.onPreReady=function(){this.isPreReady||(this.isPreReady=!0,this.trigger("preReady",{element:this.element,hasLoading:this.hasLoading,isSkip:this.isSkip}))},e.onReady=function(t){this.isReady||((t=!this.isPreReady&&t)&&(this.isPreReady=!0),this.removeAutoSizer(),this.isReady=!0,this.trigger("ready",{element:this.element,withPreReady:t,hasLoading:this.hasLoading,isSkip:this.isSkip}))},e.onAlreadyError=function(t){var e=this;setTimeout(function(){e.onError(t)})},e.onAlreadyPreReady=function(){var t=this;setTimeout(function(){t.onPreReady()})},e.onAlreadyReady=function(t){var e=this;setTimeout(function(){e.onReady(t)})},t.EVENTS=[],t}(a),L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}c(e,t);var n=e.prototype;return n.setHasLoading=function(t){this.hasLoading=t},n.check=function(){return this.isSkip?(this.onAlreadyReady(!0),!1):(this.hasDataSize?(b(this.element,this.options.prefix),this.onAlreadyPreReady()):this.trigger("requestChildren"),!0)},n.checkElement=function(){return!0},n.destroy=function(){this.clear(),this.trigger("requestDestroy"),this.off()},n.onAlreadyPreReady=function(){t.prototype.onAlreadyPreReady.call(this),this.trigger("reqeustReadyChildren")},e.EVENTS=[],e}(x),e=function(n){function t(t){void 0===t&&(t={});var e=n.call(this)||this;return e.readyCount=0,e.preReadyCount=0,e.totalCount=0,e.totalErrorCount=0,e.isPreReadyOver=!0,e.elementInfos=[],e.options=d({loaders:{},prefix:"data-"},t),e}c(t,n);var e=t.prototype;return e.check=function(t){var o=this,n=this.options.prefix;this.clear(),this.elementInfos=S(t).map(function(t,r){var e=o.getLoader(t,{prefix:n});return e.check(),e.on("error",function(t){o.onError(r,t.target)}).on("preReady",function(t){var e=o.elementInfos[r];e.hasLoading=t.hasLoading,e.isSkip=t.isSkip;t=o.checkPreReady(r);o.onPreReadyElement(r),t&&o.onPreReady()}).on("ready",function(t){var e=t.withPreReady,n=t.hasLoading,i=t.isSkip,t=o.elementInfos[r];t.hasLoading=n,t.isSkip=i;t=e&&o.checkPreReady(r),i=o.checkReady(r);e&&o.onPreReadyElement(r),o.onReadyElement(r),t&&o.onPreReady(),i&&o.onReady()}),{loader:e,element:t,hasLoading:!1,hasError:!1,isPreReady:!1,isReady:!1,isSkip:!1}});t=this.elementInfos.length;return(this.totalCount=t)||setTimeout(function(){o.onPreReady(),o.onReady()}),this},e.getTotalCount=function(){return this.totalCount},e.isPreReady=function(){return this.elementInfos.every(function(t){return t.isPreReady})},e.isReady=function(){return this.elementInfos.every(function(t){return t.isReady})},e.hasError=function(){return 0<this.totalErrorCount},e.clear=function(){this.isPreReadyOver=!1,this.totalCount=0,this.preReadyCount=0,this.readyCount=0,this.totalErrorCount=0,this.elementInfos.forEach(function(t){!t.isReady&&t.loader&&t.loader.destroy()}),this.elementInfos=[]},e.destroy=function(){this.clear(),this.off()},e.getLoader=function(e,t){var n=this,i=e.tagName.toLowerCase(),r=this.options.loaders,o=t.prefix,s=Object.keys(r);if(r[i])return new r[i](e,t);var a=new L(e,t),u=S(e.querySelectorAll(s.join(", ")));a.setHasLoading(u.some(function(t){return I(t,o)}));var c=!1,h=this.clone().on("error",function(t){a.onError(t.target)}).on("ready",function(){a.onReady(c)});return a.on("requestChildren",function(){var t=T(e,s,n.options.prefix);h.check(t).on("preReady",function(t){(c=t.isReady)||a.onPreReady()})}).on("reqeustReadyChildren",function(){h.check(u)}).on("requestDestroy",function(){h.destroy()}),a},e.clone=function(){return new t(d({},this.options))},e.checkPreReady=function(t){return this.elementInfos[t].isPreReady=!0,++this.preReadyCount,!(this.preReadyCount<this.totalCount)},e.checkReady=function(t){return this.elementInfos[t].isReady=!0,++this.readyCount,!(this.readyCount<this.totalCount)},e.onError=function(t,e){var n=this.elementInfos[t];n.hasError=!0,this.trigger(new z("error",{element:n.element,index:t,target:e,errorCount:this.getErrorCount(),totalErrorCount:++this.totalErrorCount}))},e.onPreReadyElement=function(t){var e=this.elementInfos[t];this.trigger(new z("preReadyElement",{element:e.element,index:t,preReadyCount:this.preReadyCount,readyCount:this.readyCount,totalCount:this.totalCount,isPreReady:this.isPreReady(),isReady:this.isReady(),hasLoading:e.hasLoading,isSkip:e.isSkip}))},e.onPreReady=function(){this.isPreReadyOver=!0,this.trigger(new z("preReady",{readyCount:this.readyCount,totalCount:this.totalCount,isReady:this.isReady(),hasLoading:this.hasLoading()}))},e.onReadyElement=function(t){var e=this.elementInfos[t];this.trigger(new z("readyElement",{index:t,element:e.element,hasError:e.hasError,errorCount:this.getErrorCount(),totalErrorCount:this.totalErrorCount,preReadyCount:this.preReadyCount,readyCount:this.readyCount,totalCount:this.totalCount,isPreReady:this.isPreReady(),isReady:this.isReady(),hasLoading:e.hasLoading,isPreReadyOver:this.isPreReadyOver,isSkip:e.isSkip}))},e.onReady=function(){this.trigger(new z("ready",{errorCount:this.getErrorCount(),totalErrorCount:this.totalErrorCount,totalCount:this.totalCount}))},e.getErrorCount=function(){return this.elementInfos.filter(function(t){return t.hasError}).length},e.hasLoading=function(){return this.elementInfos.some(function(t){return t.hasLoading})},t}(a),N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.checkElement=function(){var t=this.element,e=t.getAttribute("src");if(t.complete){if(e)return t.naturalWidth||this.onAlreadyError(t),!1;this.onAlreadyPreReady()}return this.addEvents(),g&&t.setAttribute("src",e),!0},e.EVENTS=["load","error"],e}(x),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.checkElement=function(){var t=this.element;return!(1<=t.readyState)&&(t.error?(this.onAlreadyError(t),!1):(this.addEvents(),!0))},e.EVENTS=["loadedmetadata","error"],e}(x),k=function(e){function t(t){return e.call(this,d({loaders:{img:N,video:A}},t=void 0===t?{}:t))||this}return c(t,e),t}(e),G=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,i=this.values,r=n.indexOf(t),r=-1===r?n.length:r;n[r]=t,i[r]=e},t}(),U=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),K="function"==typeof Map,V=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var j=function(){function t(t,e,n,i,r,o,s,a){this.prevList=t,this.list=e,this.added=n,this.removed=i,this.changed=r,this.maintained=o,this.changedBeforeAdded=s,this.fixed=a}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){var t,n,r,o,t=(t=this.changedBeforeAdded,n=this.fixed,r=[],o=[],t.forEach(function(t){var e=t[0],n=t[1],t=new V;r[e]=t,o[n]=t}),r.forEach(function(t,e){t.connect(r[e-1])}),t.filter(function(t,e){return!n[e]}).map(function(t,e){var n=t[0],i=t[1];if(n===i)return[0,0];t=r[n],n=o[i-1],i=t.getIndex();return t.disconnect(),n?t.connect(n,n.next):t.connect(void 0,r[0]),[i,t.getIndex()]})),s=this.changed,a=[];this.cacheOrdered=t.filter(function(t,e){var n=t[0],i=t[1],t=s[e],e=t[0],t=t[1];if(n!==i)return a.push([e,t]),!0}),this.cachePureChanged=a},t}();function F(t,e,n){var i=K?Map:n?U:G,r=n||function(t){return t},o=[],s=[],a=[],n=t.map(r),r=e.map(r),u=new i,c=new i,h=[],l=[],f={},d=[],p=0,g=0;return n.forEach(function(t,e){u.set(t,e)}),r.forEach(function(t,e){c.set(t,e)}),n.forEach(function(t,e){t=c.get(t);void 0===t?(++g,s.push(e)):f[t]=g}),r.forEach(function(t,e){t=u.get(t);void 0===t?(o.push(e),++p):(a.push([t,e]),g=f[e]||0,h.push([t-g,e-p]),l.push(e===t),t!==e&&d.push([t,e]))}),s.reverse(),new j(t,e,o,s,d,a,h,l)}var q,Y="function"==typeof Map?void 0:(q=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++q)});var W=function(t,e){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function H(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}W(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var B=function(){return(B=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function Z(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;0<=a;a--)(r=t[a])&&(s=(o<3?r(s):3<o?r(e,n,s):r(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s}function X(t,e){for(var n=0,i=e.length,r=t.length;n<i;n++,r++)t[r]=e[n];return t}var Q,J,$,tt={horizontal:!1,useTransform:!1,percentage:!1,isEqualSize:!1,isConstantSize:!1,gap:0,attributePrefix:"data-grid-",resizeDebounce:100,maxResizeDebounce:0,autoResize:!0,preserveUIOnDestroy:!1,defaultDirection:"end",externalContainerManager:null,externalItemRenderer:null,renderOnPropertyChange:!0,useFit:!0,outlineLength:0,outlineSize:0,useRoundedSize:!0,useResizeObserver:!1};(t=Q=Q||{})[t.PROPERTY=1]="PROPERTY",t[t.RENDER_PROPERTY=2]="RENDER_PROPERTY",(x=J=J||{})[x.UNCHECKED=1]="UNCHECKED",x[x.UNMOUNTED=2]="UNMOUNTED",x[x.MOUNTED=3]="MOUNTED",(e=$=$||{})[e.NEED_UPDATE=1]="NEED_UPDATE",e[e.WAIT_LOADING=2]="WAIT_LOADING",e[e.UPDATED=3]="UPDATED";var et={gap:Q.RENDER_PROPERTY,defaultDirection:Q.PROPERTY,renderOnPropertyChange:Q.PROPERTY,preserveUIOnDestroy:Q.PROPERTY,useFit:Q.PROPERTY,outlineSize:Q.RENDER_PROPERTY,outlineLength:Q.RENDER_PROPERTY},nt={horizontal:{inlinePos:"top",contentPos:"left",inlineSize:"height",contentSize:"width"},vertical:{inlinePos:"left",contentPos:"top",inlineSize:"width",contentSize:"height"}};function it(t){return"string"==typeof t}function rt(t){return"object"==typeof t}function ot(t){var e,r=t.prototype,o=t.propertyTypes;for(e in o)!function(n){var i=o[n]===Q.RENDER_PROPERTY,t=Object.getOwnPropertyDescriptor(r,n)||{};Object.defineProperty(r,n,{enumerable:!0,configurable:!0,get:t.get||function(){return this.options[n]},set:t.set||function(t){var e=this.options;e[n]!==t&&(e[n]=t,i&&e.renderOnPropertyChange&&this.scheduleRender())}})}(e)}function st(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}function at(t,e){return Math.max(t-e[1],e[0]-t,0)+1}var ut=function(){function t(t,e){var i=this;void 0===e&&(e={}),this._resizeTimer=0,this._maxResizeDebounceTimer=0,this.rect={width:0,height:0},this._onResize=function(){clearTimeout(i._resizeTimer),clearTimeout(i._maxResizeDebounceTimer),i._maxResizeDebounceTimer=0,i._resizeTimer=0;var t=i._options.watchDirection,e=i.rect;i.resize();var n=i.rect;t&&("box"!==t&&"width"!==t||e.width===n.width)&&("box"!==t&&"height"!==t||e.height===n.height)||i._emitter.trigger("resize")},this._scheduleResize=function(){var t=i._options,e=t.resizeDebounce,t=t.maxResizeDebounce;!i._maxResizeDebounceTimer&&e<=t&&(i._maxResizeDebounceTimer=window.setTimeout(i._onResize,t)),i._resizeTimer&&(clearTimeout(i._resizeTimer),i._resizeTimer=0),i._resizeTimer=window.setTimeout(i._onResize,e)},this._options=B({resizeDebounce:100,maxResizeDebounce:0,useResizeObserver:!1,useWindowResize:!0,watchDirection:!1,rectBox:"content-box"},e),this.container=it(t)?document.querySelector(t):t,this._init()}var e=t.prototype;return e.getRect=function(){return this.rect},e.setRect=function(t){this.rect=B({},t)},e.resize=function(){var t=this.container;this.setRect("border-box"===this._options.rectBox?{width:t.offsetWidth,height:t.offsetHeight}:{width:t.clientWidth,height:t.clientHeight})},e.listen=function(t){return this._emitter.on("resize",t),this},e.destroy=function(){var t;null!==(t=this._observer)&&void 0!==t&&t.disconnect(),this._options.useWindowResize&&window.removeEventListener("reisze",this._onResize)},e._init=function(){var t=this.container,e=this._options;this._emitter=new a,e.useResizeObserver&&window.ResizeObserver&&(this._observer=new window.ResizeObserver(this._scheduleResize),this._observer.observe(t,{box:e.rectBox})),e.useWindowResize&&window.addEventListener("resize",this._scheduleResize),this.resize()},t}(),ct=function(i){function t(t,e){var n=i.call(this)||this;return n.container=t,n._onResize=function(){n.trigger("resize")},n.options=B({horizontal:tt.horizontal,autoResize:tt.autoResize,resizeDebounce:tt.resizeDebounce,maxResizeDebounce:tt.maxResizeDebounce,useResizeObserver:tt.useResizeObserver},e),n._init(),n}H(t,i);var e=t.prototype;return e.resize=function(){var t=this.container;this.setRect({width:t.clientWidth,height:t.clientHeight})},e.getRect=function(){return this._watcher.getRect()},e.setRect=function(t){this._watcher.setRect(t)},e.getInlineSize=function(){return this.getRect()[this._names.inlineSize]},e.getContentSize=function(){return this.getRect()[this._names.contentSize]},e.getStatus=function(){return{rect:this._watcher.getRect()}},e.setStatus=function(t){this.setRect(t.rect),this.setContentSize(this.getContentSize())},e.setContentSize=function(t){var e,n=this.options.horizontal?"width":"height";this.setRect(B(B({},this.getRect()),((e={})[n]=t,e))),this.container.style[n]=t+"px"},e.destroy=function(t){void 0===t&&(t={}),this._watcher.destroy(),t.preserveUI||(this.container.style.cssText=this.orgCSSText)},e._init=function(){var t=this.container,e=window.getComputedStyle(t);this.orgCSSText=t.style.cssText,"static"===e.position&&(t.style.position="relative");e=this.options;this._watcher=new ut(t,{useWindowResize:e.autoResize,useResizeObserver:e.useResizeObserver,resizeDebounce:e.resizeDebounce,maxResizeDebounce:e.maxResizeDebounce,watchDirection:!!e.useResizeObserver&&this._names.inlineSize}).listen(this._onResize)},Object.defineProperty(e,"_names",{get:function(){return nt[this.options.horizontal?"horizontal":"vertical"]},enumerable:!1,configurable:!0}),t}(a),ht=function(){function t(t){this.initialRect=null,this.sizePercetage=!1,this.posPercetage=!1,this.options=B({attributePrefix:tt.attributePrefix,useTransform:tt.useTransform,horizontal:tt.horizontal,percentage:tt.percentage,isEqualSize:tt.isEqualSize,isConstantSize:tt.isConstantSize,useRoundedSize:tt.useRoundedSize},t),this._init()}var e=t.prototype;return e.resize=function(){this.initialRect=null},e.renderItems=function(t){var e=this;t.forEach(function(t){e._renderItem(t)})},e.getInlineSize=function(){return this.containerRect[this.options.horizontal?"height":"width"]},e.setContainerRect=function(t){this.containerRect=t},e.updateItems=function(t){var e=this;t.forEach(function(t){e._updateItem(t)})},e.getStatus=function(){return{initialRect:this.initialRect}},e.setStatus=function(t){this.initialRect=t.initialRect},e._init=function(){var t=this.options.percentage,e=!1,n=!1;!0===t?n=e=!0:t&&(-1<t.indexOf("position")&&(n=!0),-1<t.indexOf("size")&&(e=!0)),this.posPercetage=n,this.sizePercetage=e},e._updateItem=function(t){var e=this.options,n=e.isEqualSize,i=e.isConstantSize,r=e.useRoundedSize,o=this.initialRect,s=t.orgRect,a=t.element,u=t.updateState===$.WAIT_LOADING,e=s&&s.width&&s.height;if(n&&o)c=o;else if(i&&e&&!u)c=s;else{if(!a)return;var c={left:a.offsetLeft,top:a.offsetTop,width:0,height:0};r?(c.width=a.offsetWidth,c.height=a.offsetHeight):(r=a.getBoundingClientRect(),c.width=r.width,c.height=r.height)}return t.isFirstUpdate&&e||(t.orgRect=B({},c)),t.rect=B({},c),t.element&&(t.mountState=J.MOUNTED),t.updateState===$.NEED_UPDATE&&(t.updateState=$.UPDATED,t.isFirstUpdate=!0),t.attributes=a?function(t,e){for(var n={},i=t.attributes,r=i.length,o=0;o<r;++o){var s=i[o],a=s.name,s=s.value;-1!==a.indexOf(e)&&(n[a.replace(e,"").replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()})]=s)}return n}(a,this.options.attributePrefix):{},u||(this.initialRect=B({},c)),c},e._renderItem=function(t){var n,i,e,r,o,s,a,u=t.element,c=t.cssRect;u&&c&&(a=(e=this.options).horizontal,t=e.useTransform,n=this.posPercetage,i=this.sizePercetage,e=["position: absolute;"],r=(a=nt[a?"horizontal":"vertical"]).inlineSize,o=a.inlinePos,s=this.getInlineSize(),a=c,a=Object.keys(a),t&&(a=a.filter(function(t){return"top"!==t&&"left"!==t}),e.push("transform: translate("+(c.left||0)+"px, "+(c.top||0)+"px);")),e.push.apply(e,a.map(function(t){var e=c[t];return t===r&&i||t===o&&n?t+": "+e/s*100+"%;":t+": "+e+"px;"})),u.style.cssText+=e.join(""))},t}(),lt=function(){function t(t,e){void 0===e&&(e={}),this.horizontal=t,this.isUpdate=!1,this.hasTransition=!1,this.transitionDuration="";var n,t=e.element,i=B({key:"",orgRect:{left:0,top:0,width:0,height:0},rect:{left:0,top:0,width:0,height:0},cssRect:{},attributes:{},data:{},isFirstUpdate:!1,mountState:J.UNCHECKED,updateState:$.NEED_UPDATE,element:t||null,orgCSSText:null!==(t=null==t?void 0:t.style.cssText)&&void 0!==t?t:"",gridData:{}},e);for(n in i)this[n]=i[n]}var e=t.prototype;return Object.defineProperty(e,"orgInlineSize",{get:function(){var t=this._names.inlineSize;return this.orgRect[t]||this.rect[t]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"orgContentSize",{get:function(){var t=this._names.contentSize;return this.orgRect[t]||this.rect[t]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"inlineSize",{get:function(){return this.rect[this._names.inlineSize]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"contentSize",{get:function(){return this.rect[this._names.contentSize]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssInlineSize",{get:function(){return this.cssRect[this._names.inlineSize]},set:function(t){this.cssRect[this._names.inlineSize]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssContentSize",{get:function(){return this.cssRect[this._names.contentSize]},set:function(t){this.cssRect[this._names.contentSize]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssInlinePos",{get:function(){return this.cssRect[this._names.inlinePos]},set:function(t){this.cssRect[this._names.inlinePos]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"cssContentPos",{get:function(){return this.cssRect[this._names.contentPos]},set:function(t){this.cssRect[this._names.contentPos]=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"computedInlineSize",{get:function(){var t=this._names.inlineSize;return this.cssRect[t]||this.rect[t]||this.orgRect[t]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"computedContentSize",{get:function(){var t=this._names.contentSize;return this.cssRect[t]||this.rect[t]||this.orgRect[t]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"computedInlinePos",{get:function(){var t,e=this._names.inlinePos;return null!==(t=this.cssRect[e])&&void 0!==t?t:this.rect[e]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"computedContentPos",{get:function(){var t,e=this._names.contentPos;return null!==(t=this.cssRect[e])&&void 0!==t?t:this.rect[e]},enumerable:!1,configurable:!0}),e.setCSSGridRect=function(t){var e,n=nt[this.horizontal?"horizontal":"vertical"],i={};for(e in t)i[n[e]]=t[e];this.cssRect=i},e.getStatus=function(){return{mountState:this.mountState,updateState:this.updateState,attributes:this.attributes,orgCSSText:this.orgCSSText,isFirstUpdate:this.isFirstUpdate,element:null,key:this.key,orgRect:this.orgRect,rect:this.rect,cssRect:this.cssRect,gridData:this.gridData,data:this.data}},e.getMinimizedStatus=function(){var t={orgRect:this.orgRect,rect:this.rect,cssRect:this.cssRect,attributes:this.attributes,gridData:this.gridData},e=this,n=e.key,i=e.mountState,r=e.updateState,o=e.isFirstUpdate,e=e.orgCSSText;return void 0!==n&&(t.key=n),i!==J.UNCHECKED&&(t.mountState=i),r!==$.NEED_UPDATE&&(t.updateState=r),o&&(t.isFirstUpdate=!0),e&&(t.orgCSSText=e),t},Object.defineProperty(e,"_names",{get:function(){return this.horizontal?nt.horizontal:nt.vertical},enumerable:!1,configurable:!0}),t}(),ft=function(d){function t(t,e){void 0===e&&(e={});var n=d.call(this)||this;n.items=[],n.outlines={start:[],end:[]},n._renderTimer=0,n._onResize=function(){n._renderItems({useResize:!0},!0)},n.options=B(B({},n.constructor.defaultOptions),e),n.containerElement=it(t)?document.querySelector(t):t;var i=n.options,r=i.isEqualSize,o=i.isConstantSize,s=i.useTransform,a=i.horizontal,u=i.percentage,c=i.externalContainerManager,h=i.externalItemRenderer,l=i.resizeDebounce,f=i.maxResizeDebounce,e=i.autoResize,t=i.useRoundedSize,i=i.useResizeObserver;return n.containerManager=c||new ct(n.containerElement,{horizontal:a,resizeDebounce:l,maxResizeDebounce:f,autoResize:e,useResizeObserver:i}).on("resize",n._onResize),n.itemRenderer=h||new ht({useTransform:s,isEqualSize:r,isConstantSize:o,percentage:u,useRoundedSize:t}),n._init(),n}H(t,d);var e=t.prototype;return e.getContainerElement=function(){return this.containerElement},e.getItems=function(){return this.items},e.getChildren=function(){return[].slice.call(this.containerElement.children)},e.setItems=function(t){return this.items=t,this},e.getContainerInlineSize=function(){return this.containerManager.getInlineSize()},e.getOutlines=function(){return this.outlines},e.setOutlines=function(t){return this.outlines=t,this},e.syncElements=function(t){void 0===t&&(t={});var n=this.items,e=this.options.horizontal,i=this.getChildren(),r=F(this.items.map(function(t){return t.element}),i,Y),o=r.added,s=r.maintained,a=r.changed,r=r.removed,u=[];return s.forEach(function(t){var e=t[0],t=t[1];u[t]=n[e]}),o.forEach(function(t){u[t]=new lt(e,{element:i[t]})}),this.setItems(u),(o.length||r.length||a.length)&&this.renderItems(t),this},e.updateItems=function(t,e){void 0===t&&(t=this.items);var n=(e=void 0===e?{}:e).useOrgResize;return t.forEach(function(t){var e;n&&((e=t.orgRect).width=0,e.height=0),t.updateState=$.NEED_UPDATE}),this.checkReady(e),this},e.renderItems=function(t){return this._renderItems(t=void 0===t?{}:t),this},e.getStatus=function(e){return{outlines:this.outlines,items:this.items.map(function(t){return e?t.getMinimizedStatus():t.getStatus()}),containerManager:this.containerManager.getStatus(),itemRenderer:this.itemRenderer.getStatus()}},e.setStatus=function(t){var e=this,n=this.options.horizontal,i=this.containerManager,r=i.getInlineSize(),o=this.getChildren();return this.itemRenderer.setStatus(t.itemRenderer),i.setStatus(t.containerManager),this.outlines=t.outlines,this.items=t.items.map(function(t,e){return new lt(n,B(B({},t),{element:o[e]}))}),this.itemRenderer.renderItems(this.items),r!==i.getInlineSize()?this.renderItems({useResize:!0}):window.setTimeout(function(){e._renderComplete({direction:e.defaultDirection,mounted:e.items,updated:[],isResize:!1})}),this},e.getComputedOutlineSize=function(t){return void 0===t&&(t=this.items),this.options.outlineSize||this.getContainerInlineSize()},e.getComputedOutlineLength=function(t){return void 0===t&&(t=this.items),this.options.outlineLength||1},e.destroy=function(t){var t=(t=void 0===t?{}:t).preserveUI,t=void 0===t?this.options.preserveUIOnDestroy:t;this.containerManager.destroy({preserveUI:t}),t||this.items.forEach(function(t){var e=t.element,t=t.orgCSSText;e&&(e.style.cssText=t)}),null!==(t=this._im)&&void 0!==t&&t.destroy()},e.checkReady=function(n){var t,i=this;void 0===n&&(n={});var r=this.items,o=r.filter(function(t){var e;return(null===(e=t.element)||void 0===e?void 0:e.parentNode)&&t.updateState!==$.UPDATED}),e=o.filter(function(t){return t.mountState!==J.MOUNTED}),s=[];e.filter(function(t){if(t.hasTransition)return!0;var e=t.element;return 0<parseFloat(getComputedStyle(e).transitionDuration)&&(t.hasTransition=!0,t.transitionDuration=e.style.transitionDuration,!0)}).forEach(function(t){t.element.style.transitionDuration="0s"}),null!==(t=this._im)&&void 0!==t&&t.destroy(),this._im=new k({prefix:this.options.attributePrefix}).on("preReadyElement",function(t){o[t.index].updateState=$.WAIT_LOADING}).on("preReady",function(){o.forEach(function(t){var e=t.orgRect.width&&t.orgRect.height,n=t.cssRect.width||t.cssRect.height;!e&&n&&(t.element.style.cssText=t.orgCSSText)}),i.itemRenderer.updateItems(o),i.readyItems(e,o,n)}).on("readyElement",function(t){var e=o[t.index];e.updateState=$.NEED_UPDATE,t.isPreReadyOver&&(e.element.style.cssText=e.orgCSSText,i.itemRenderer.updateItems([e]),i.readyItems([],[e],n))}).on("error",function(t){var e=r[t.index];i.trigger("contentError",{element:t.element,target:t.target,item:e,update:function(){s.push(e)}})}).on("ready",function(){s.length&&i.updateItems(s)}).check(o.map(function(t){return t.element}))},e.scheduleRender=function(){var t=this;this._clearRenderTimer(),this._renderTimer=window.setTimeout(function(){t.renderItems()})},e.fitOutlines=function(t){void 0===t&&(t=this.useFit);var e=this.outlines,n=e.start,i=e.end,r=n.length?Math.min.apply(Math,n):0;!t&&0<r||(e.start=n.map(function(t){return t-r}),e.end=i.map(function(t){return t-r}),this.items.forEach(function(t){var e=t.cssContentPos;"number"==typeof e&&(t.cssContentPos=e-r)}))},e.readyItems=function(t,e,n){var i=this.outlines,r=n.direction||this.options.defaultDirection,o=n.outline||i["end"===r?"start":"end"],s=this.items,i={start:X([],o),end:X([],o)};e.forEach(function(t){t.isUpdate=!0}),s.length&&(i=this.applyGrid(this.items,r,o)),e.forEach(function(t){t.isUpdate=!1}),this.setOutlines(i),this.fitOutlines(),this.itemRenderer.renderItems(this.items),this._refreshContainerContentSize();i=t.filter(function(t){return t.hasTransition});i.length&&(this.containerManager.resize(),i.forEach(function(t){t.element.style.transitionDuration=t.transitionDuration})),this._renderComplete({direction:r,mounted:t,updated:e,isResize:!!n.useResize})},e._renderComplete=function(t){this.trigger("renderComplete",t)},e._clearRenderTimer=function(){clearTimeout(this._renderTimer),this._renderTimer=0},e._refreshContainerContentSize=function(){var t=this.outlines,e=t.start,n=t.end,t=this.options.gap,n=n.length?Math.max.apply(Math,n):0,e=e.length?Math.max.apply(Math,e):0,t=Math.max(e,n-t);this.containerManager.setContentSize(t)},e._resizeContainer=function(){this.containerManager.resize(),this.itemRenderer.setContainerRect(this.containerManager.getRect())},e._init=function(){this._resizeContainer()},e._renderItems=function(t,e){void 0===t&&(t={}),this._clearRenderTimer();var n=t.useResize||t.useOrgResize;n&&!e&&this._resizeContainer(),!this.getItems().length&&this.getChildren().length?this.syncElements(t):n?this.updateItems(this.items,t):this.checkReady(t)},t.defaultOptions=tt,t.propertyTypes=et,Z([ot],t)}(a);function dt(t,e,n,i){return Math[i].apply(Math,t.slice(e,e+n))}var pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}H(e,t);var n=e.prototype;return n.applyGrid=function(m,t,e){for(var n,y=this.getComputedOutlineSize(m),v=this.getComputedOutlineLength(m),i=this.options,R=i.gap,r=i.align,S=i.columnSizeRatio,i=e.length,_=m.length,E=this._getAlignPoses(v,y),z="end"===t,I=z?"min":"max",C=z?"max":"min",t=[0],O=(t=i===v?e.slice():(n=i?Math[C].apply(Math,e):0,st(v).map(function(){return n}))).slice(),P=1<v?E[1]-E[0]:0,T="stretch"===r,o=function(t){for(var e,n,i,r,o=m[z?t:_-1-t],s=parseInt(o.attributes.column||"1",10),a=parseInt(o.attributes.maxColumn||"1",10),u=o.contentSize,c=Math.min(v,s||Math.max(1,Math.ceil((o.inlineSize+R)/P))),h=Math.min(v,Math.max(c,a)),l=(n=c,i=I,t=(e=O).length-n+1,r="max"===i?"min":"max",a="max"===i?"lastIndexOf":"indexOf",(t=st(t).map(function(t){return dt(e,t,n,r)}))[a](Math[i].apply(Math,t))),f=dt(O,l,c,C);c<h;){var d=l+c,p=l-1;if(z&&(v<=d||O[d]>f))break;if(!z&&(p<0||O[p])<f)break;z||--l,++c}l=Math.max(0,l),c=Math.min(v-l,c),(0<s&&1<c||T)&&(o.cssInlineSize=(c-1)*P+y),0<S&&(u=o.computedInlineSize/S,o.cssContentSize=u);s=E[l],f=z?f:f-R-u;o.cssInlinePos=s,o.cssContentPos=f;var g=z?f+u+R:f;st(c).forEach(function(t){O[l+t]=g})},s=0;s<_;++s)o(s);return{start:z?t:O,end:z?O:t}},n.getComputedOutlineSize=function(t){void 0===t&&(t=this.items);var e=this.options,n=e.gap,i=e.align,r=this.columnSize||this.outlineSize,o=this.column||this.outlineLength||1,e=0;if("stretch"===i)e=(this.getContainerInlineSize()+n)/(o||1)-n;else if(r)e=r;else if(t.length){for(var s=t[0],a=0,u=t;a<u.length;a++){var c=u[a],h=c.attributes;if(c.updateState===$.UPDATED&&c.inlineSize&&!h.column&&!h.maxColumnCount){s=c;break}}e=s.inlineSize||0}else e=this.getContainerInlineSize();return e||0},n.getComputedOutlineLength=function(t){void 0===t&&(t=this.items);var e=this.gap,n=this.column||this.outlineLength,i=this.columnCalculationThreshold;return n||(n=this.getComputedOutlineSize(t),Math.min(t.length,Math.max(1,Math.floor((this.getContainerInlineSize()+e)/(n-i+e)))))},n._getAlignPoses=function(t,e){var n=this.options,i=n.align,r=n.gap,o=this.getContainerInlineSize(),s=st(t),a=0,u=0;return"justify"===i||"stretch"===i?(u=(n=t-1)?Math.max((o-e)/n,e+r):0,a=Math.min(0,o/2-(n*u+e)/2)):(e=(t-1)*(u=e+r)+e,"center"===i?a=(o-e)/2:"end"===i&&(a=o-e)),s.map(function(t){return a+t*u})},e.propertyTypes=B(B({},ft.propertyTypes),{column:Q.RENDER_PROPERTY,columnSize:Q.RENDER_PROPERTY,columnSizeRatio:Q.RENDER_PROPERTY,align:Q.RENDER_PROPERTY,columnCalculationThreshold:Q.RENDER_PROPERTY}),e.defaultOptions=B(B({},ft.defaultOptions),{align:"justify",column:0,columnSize:0,columnSizeRatio:0,columnCalculationThreshold:.5}),Z([ot],e)}(ft);function gt(t,e,n){return function(t,e){for(var n=[],i=e;i;)n.push(i),i=t[i];return n.reverse(),n}(function(t,e,n){var i={},r={};r[e]=0;var o,s,a,u,c,h,l=new mt(function(t){return t.cost});for(l.push({value:e,cost:0});l.size();)for(var f in s=(o=l.pop()).value,a=o.cost,u=t(s)||{})c=a+u[f],h=r[f],(void 0===r[f]||c<h)&&(r[f]=c,l.push({value:f,cost:c}),i[f]=s);if(void 0!==r[n])return i;throw n=["Could not find a path from ",e," to ",n,"."].join(""),new Error(n)}(t,e,n),n)}var mt=function(){function t(t){this.content=[],this.scoreFunction=t}var e=t.prototype;return e.push=function(t){this.content.push(t),this.bubbleUp(this.content.length-1)},e.pop=function(){var t=this.content[0],e=this.content.pop();return 0<this.content.length&&(this.content[0]=e,this.sinkDown(0)),t},e.size=function(){return this.content.length},e.bubbleUp=function(t){for(var e=t,n=this.content[e];0<e;){var i=Math.floor((e+1)/2)-1,r=this.content[i];if(!(this.scoreFunction(n)<this.scoreFunction(r)))break;this.content[i]=n,this.content[e]=r,e=i}},e.sinkDown=function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var r,o=2*(t+1),s=o-1,a=null;if(s<e&&(r=this.content[s],(r=this.scoreFunction(r))<i&&(a=s)),o<e&&(s=this.content[o],this.scoreFunction(s)<(null==a?i:r)&&(a=o)),null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}},t}();function yt(t,e){var n=t.orgInlineSize,i=t.orgContentSize;if(!n||!i)return e;var r=parseFloat(t.gridData.inlineOffset)||0,t=parseFloat(t.gridData.contentOffset)||0;return(i<=t?1:(n-r)/(i-t))*(e-t)+r}var vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}H(e,t);var n=e.prototype;return n.applyGrid=function(t,e,n){var i=this.options,s=i.attributePrefix,a=i.horizontal;t.forEach(function(t){var e,n,i,r,o;t.isUpdate&&(e=t.element,r=t.attributes,n=t.gridData,i=parseFloat(r.inlineOffset)||n.inlineOffset||0,o=parseFloat(r.contentOffset)||0|n.contentOffset,!e||"inlineOffset"in r||"contentOffset"in r||t.mountState!==J.MOUNTED||(r=e.querySelector("["+s+"maintained-target]"))&&(t=e.offsetWidth-e.clientWidth+e.scrollWidth-r.clientWidth,r=e.offsetHeight-e.clientHeight+e.scrollHeight-r.clientHeight,o=a?(i=r,t):(i=t,r)),n.inlineOffset=i,n.contentOffset=o)});var r=this.options.rowRange,i=[];return t.length&&(i=r?this._getRowPath(t):this._getPath(t)),this._setStyle(t,i,n,"end"===e)},n._getRowPath=function(t){var e=this._getColumnRange(),n=this._getRowRange(),n=this._getRowLink(t,{path:[0],cost:0,length:0,currentNode:0},e,n);return null!==(n=null==n?void 0:n.path.map(function(t){return""+t}))&&void 0!==n?n:[]},n._getRowLink=function(t,e,n,i){var r=n[0],o=i[0],s=i[1],a=t.length,u=e.path,c=e.length,h=e.cost,l=e.currentNode;if(l<a&&(s<=c||a<l+r)){r=at(a-l,n)*Math.abs(this._getCost(t,l,a));return B(B({},e),{length:c+1,path:X(X([],u),[a]),currentNode:a,cost:h+r,isOver:!0})}return a<=l?B(B({},e),{currentNode:a,isOver:c<o||s<c}):this._searchRowLink(t,e,a,n,i)},n._searchRowLink=function(t,e,n,i,r){for(var o,s=i[0],a=i[1],u=e.currentNode,c=e.path,h=e.length,l=e.cost,f=Math.min(n,u+a),d=[],p=u+s;p<=f;++p)p!==u&&(o=Math.abs(this._getCost(t,u,p)),(o=this._getRowLink(t,{path:X(X([],c),[p]),length:h+1,cost:l+o,currentNode:p},i,r))&&d.push(o));return d.sort(function(t,e){var n=t.isOver;return n!==e.isOver?n?1:-1:at(t.length,r)-at(e.length,r)||t.cost-e.cost}),d[0]},n._getExpectedRowSize=function(t){var e=this.options.gap,r=this.getContainerInlineSize()-e*(t.length-1),o=0,s=0;return t.forEach(function(t){var e,n=t.orgInlineSize,i=t.orgContentSize;n&&i?(e=parseFloat(t.gridData.inlineOffset)||0,t=parseFloat(t.gridData.contentOffset)||0,o+=i=i<=t?1:(n-e)/(i-t),s+=t*i,r-=e):o+=1}),o?(r+s)/o:0},n._getExpectedInlineSize=function(t,n){var e=this.options.gap,i=t.reduce(function(t,e){return t+yt(e,n)},0);return i?i+e*(t.length-1):0},n._getCost=function(t,e,n){var i=t.slice(e,n),t=this._getExpectedRowSize(i),e=this._getSizeRange(),n=e[0],e=e[1];if(this.isCroppedSize){if(n<=t&&t<=e)return 0;i=this._getExpectedInlineSize(i,t<n?n:e);return Math.pow(i-this.getContainerInlineSize(),2)}if(isFinite(e)){if(t<n)return Math.pow(t-n,2)+Math.pow(e,2);if(e<t)return Math.pow(t-e,2)+Math.pow(e,2)}else if(t<n)return Math.max(Math.pow(n,2),Math.pow(t,2))+Math.pow(e,2);return t-n},n._getPath=function(o){var s=this,a=o.length,t=this.options.columnRange,t=rt(t)?t:[t,t],u=t[0],c=t[1];return gt(function(t){for(var e={},n=parseInt(t,10),i=Math.min(n+u,a);i<=a&&!(c<i-n);++i){var r=s._getCost(o,n,i);r<0&&i===a&&(r=0),e[""+i]=Math.pow(r,2)}return e},"0",""+a)},n._setStyle=function(t,e,n,i){var s=this;void 0===n&&(n=[]);var r=this.options,a=r.gap,u=r.isCroppedSize,c=r.displayedRow,h=this._getSizeRange(),n=n[0]||0,l=this.getContainerInlineSize(),e=function(t,e){for(var n=e.length,i=[],r=0;r<n-1;++r){var o=parseInt(e[r],10),s=parseInt(e[r+1],10);i.push(t.slice(o,s))}return i}(t,e),f=n,d=0;if(e.forEach(function(i,t){var e=i.length,r=s._getExpectedRowSize(i);u&&(r=Math.max(h[0],Math.min(r,h[1])));var n=s._getExpectedInlineSize(i,r),e=a*(e-1),o=(l-e)/(n-e);i.forEach(function(t,e){var n=yt(t,r),e=i[e-1],e=e?e.cssInlinePos+e.cssInlineSize+a:0;u&&(n*=o),t.setCSSGridRect({inlinePos:e,contentPos:f,inlineSize:n,contentSize:r})}),f+=a+r,(c<0||t<c)&&(d=f)}),i)return{start:[n],end:[d]};var o=f-n;return t.forEach(function(t){t.cssContentPos-=o}),{start:[n-o],end:[n]}},n.getComputedOutlineLength=function(){return 1},n.getComputedOutlineSize=function(){return this.getContainerInlineSize()},n._getRowRange=function(){var t=this.rowRange;return rt(t)?t:[t,t]},n._getColumnRange=function(){var t=this.columnRange;return rt(t)?t:[t,t]},n._getSizeRange=function(){var t=this.sizeRange;return rt(t)?t:[t,t]},e.propertyTypes=B(B({},ft.propertyTypes),{columnRange:Q.RENDER_PROPERTY,rowRange:Q.RENDER_PROPERTY,sizeRange:Q.RENDER_PROPERTY,isCroppedSize:Q.RENDER_PROPERTY,displayedRow:Q.RENDER_PROPERTY}),e.defaultOptions=B(B({},ft.defaultOptions),{columnRange:[1,8],rowRange:0,sizeRange:[0,1/0],displayedRow:-1,isCroppedSize:!1}),Z([ot],e)}(ft);function Rt(t){var e=-1/0;return t.forEach(function(t){isFinite(t)&&(e=Math.max(e,t))}),isFinite(e)?e:0}function St(t,e,n){return Rt(t)+function(t,e,n){var i=t.length;if(!i)return 0;var r=function(t){var e=1/0;return t.forEach(function(t){isFinite(t)&&(e=Math.min(e,t))}),isFinite(e)?e:0}(e),o=Rt(t),s=0;if(!n)return 0;for(var a=0;a<i;++a){var u=t[a],c=e[a];isFinite(u)&&isFinite(c)&&(u=u-o,c=c-r,s=a?Math.max(s,s+u-c):u-c)}return s}(t,e,n)}function _t(t,e,n){for(var i=n.inlinePos,r=n.inlineSize,o=n.contentPos,s=n.contentSize,a=i;a<i+r;++a)t[a]=Math.min(t[a],o),e[a]=Math.max(e[a],o+s)}var Et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}H(e,t);var n=e.prototype;return n.applyGrid=function(t,e,n){var i=this._getFrame(),r=i.inlineSize,o=i.contentSize,s=i.rects,a=this.options,u=a.gap,c=a.useFrameFill,a=this.getRectSize(r),h=a.inlineSize,l=a.contentSize,f=t.length;if(!f||!r||!o)return{start:n,end:n};for(var d=s.length,p=st(r).map(function(){return 1/0}),g=st(r).map(function(){return-1/0}),m=i.outline.map(function(t){return t*(l+u)}),y=0;y<f;y+=d)for(var v=St(g,m,c),R=0;R<d&&y+R<f;++R){var S=t[y+R],_=s[R],E=_.contentPos,z=_.inlinePos,I=_.contentSize,C=_.inlineSize,O=v+E*(l+u),_=z*(h+u),E=I*(l+u)-u,I=C*(h+u)-u;_t(p,g,{inlinePos:z,inlineSize:C,contentPos:O,contentSize:E+u}),S.setCSSGridRect({inlinePos:_,contentPos:O,inlineSize:I,contentSize:E})}var P,e="end"===e,n=n.length?n:[0];n.length!==r&&(P=(e?Math.max:Math.min).apply(Math,n),n=st(r).map(function(){return P}));var p=p.map(function(t){return isFinite(t)?t:0}),g=g.map(function(t){return isFinite(t)?t:0}),T=e?St(n,p,c):St(g,n,c);return t.forEach(function(t){t.cssContentPos+=T}),{start:p.map(function(t){return t+T}),end:g.map(function(t){return t+T})}},n.getComputedOutlineLength=function(){var t=this.options.frame;return t.length?t[0].length:0},n.getComputedOutlineSize=function(){var t=this.options,e=t.gap,t=t.rectSize;return"object"==typeof t?t.inlineSize:t||(this.getContainerInlineSize()+e)/this.getComputedOutlineLength()-e},n.getRectSize=function(t){var e=this.options,n=e.gap,e=e.rectSize;if("object"==typeof e)return e;n=e||(this.getContainerInlineSize()+n)/t-n;return{inlineSize:n,contentSize:n}},n._getFrame=function(){for(var t=this.options.frame,e=t.length,n=e?t[0].length:0,i=[],r={},o=st(n).map(function(){return 1/0}),s=st(n).map(function(){return-1/0}),a=0;a<e;++a)for(var u=0;u<n;++u){var c=t[a][u];c&&(r[a+","+u]||(_t(o,s,c=this._findRect(r,c,a,u,n,e)),i.push(c)))}return i.sort(function(t,e){return t.type<e.type?-1:1}),{rects:i,inlineSize:n,contentSize:e,outline:o}},n._findRect=function(t,e,n,i,r,o){for(var s=this.options.frame,a=1,u=1,c=i;c<r&&s[n][c]===e;++c)u=c-i+1;for(var h=n;h<o&&s[h][i]===e;++h)a=h-n+1;for(var l=n;l<n+a;++l)for(var f=i;f<i+u;++f)t[l+","+f]=!0;return{type:e,inlinePos:i,contentPos:n,inlineSize:u,contentSize:a}},e.propertyTypes=B(B({},ft.propertyTypes),{frame:Q.RENDER_PROPERTY,useFrameFill:Q.RENDER_PROPERTY,rectSize:Q.RENDER_PROPERTY}),e.defaultOptions=B(B({},ft.defaultOptions),{frame:[],rectSize:0,useFrameFill:!0}),Z([ot],e)}(ft),zt=function(){function t(t){var e,n=B({orgInlineSize:0,orgContentSize:0,inlineSize:0,contentSize:0,inlinePos:0,contentPos:0,items:[]},t);for(e in n)this[e]=n[e]}var e=t.prototype;return e.scaleTo=function(t,e){var n=this.inlineSize?t/this.inlineSize:0,i=this.contentSize?e/this.contentSize:0;this.items.forEach(function(t){0!=n&&(t.inlinePos*=n,t.inlineSize*=n),0!=i&&(t.contentPos*=i,t.contentSize*=i)}),this.inlineSize=t,this.contentSize=e},e.push=function(t){this.items.push(t)},e.getOrgSizeWeight=function(){return this.orgInlineSize*this.orgContentSize},e.getSize=function(){return this.inlineSize*this.contentSize},e.getOrgRatio=function(){return 0===this.orgContentSize?0:this.orgInlineSize/this.orgContentSize},e.getRatio=function(){return 0===this.contentSize?0:this.inlineSize/this.contentSize},t}();function It(t,e){e=t/e;return(e=e<1?1/e:e)-1}var Ct,Ot,Pt,Tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}H(e,t);var n=e.prototype;return n.applyGrid=function(t,e,n){var i=this,r=this.options,o=r.aspectRatio,s=r.gap,a=this.getContainerInlineSize(),u=a/o,n=n.length?n:[0],c="end"===e?Math.max.apply(Math,n):Math.min.apply(Math,n)-u-s,n=c+u+s,h=new zt({});return t.forEach(function(t){t=new zt({inlineSize:t.orgInlineSize,contentSize:t.orgContentSize,orgInlineSize:t.orgInlineSize,orgContentSize:t.orgContentSize});i._findBestFitArea(h,t),h.push(t),h.scaleTo(a+s,u+s)}),t.forEach(function(t,e){var n=h.items[e],i=n.inlineSize-s,r=n.contentSize-s,e=c+n.contentPos,n=n.inlinePos;t.setCSSGridRect({inlinePos:n,contentPos:e,inlineSize:i,contentSize:r})}),{start:[c],end:[n]}},n._findBestFitArea=function(t,p){if(0===t.getRatio())return t.orgInlineSize=p.inlineSize,t.orgContentSize=p.contentSize,t.inlineSize=p.inlineSize,void(t.contentSize=p.contentSize);var g,e,n,i,r,m=1/0,y=!1,v={inlineSize:0,contentSize:0},R={inlineSize:0,contentSize:0},S=this._getWeight("size"),_=this._getWeight("ratio");t.items.forEach(function(t){for(var e=It(t.getOrgSizeWeight(),t.getSize())*S,n=It(t.getOrgRatio(),t.getRatio())*_,i=t.inlineSize,r=t.contentSize,o=0;o<2;++o){var s=void 0,a=void 0,u=void 0,c=void 0;0===o?(u=s=i,c=r-(a=r*(p.contentSize/(t.orgContentSize+p.contentSize)))):(c=a=r,u=i-(s=i*(p.inlineSize/(t.orgInlineSize+p.inlineSize))));var h=s*a,l=s/a,f=u*c,d=c/c,h=It(p.getSize(),h)*S;h+=It(p.getRatio(),l)*_,h+=It(t.getOrgSizeWeight(),f)*S-e,(h+=It(t.getOrgRatio(),d)*_-n)===Math.min(h,m)&&(m=h,g=t,y=0===o,v.inlineSize=s,v.contentSize=a,R.inlineSize=u,R.contentSize=c)}}),e=g,n=v,i=R,r=y,(t=p).contentSize=n.contentSize,t.inlineSize=n.inlineSize,e.contentSize=i.contentSize,e.inlineSize=i.inlineSize,r?(t.contentPos=e.contentPos+e.contentSize,t.inlinePos=e.inlinePos):(t.inlinePos=e.inlinePos+e.inlineSize,t.contentPos=e.contentPos)},n.getComputedOutlineLength=function(){return 1},n.getComputedOutlineSize=function(){return this.getContainerInlineSize()},n._getWeight=function(t){var e=this.options,n=e.weightPriority;return n===t?100:"custom"===n?e[t+"Weight"]:1},e.propertyTypes=B(B({},ft.propertyTypes),{aspectRatio:Q.RENDER_PROPERTY,sizeWeight:Q.RENDER_PROPERTY,ratioWeight:Q.RENDER_PROPERTY,weightPriority:Q.RENDER_PROPERTY}),e.defaultOptions=B(B({},ft.defaultOptions),{aspectRatio:1,sizeWeight:1,ratioWeight:1,weightPriority:"custom"}),Z([ot],e)}(ft),t="undefined"!=typeof window?window.navigator.userAgent:"",wt=/iPhone|iPad/.test(t),bt="infinitegrid-container",Mt={renderOnPropertyChange:!0,useFit:!0,autoResize:!0},Dt=_({},et),xt={START:"start",END:"end",NONE:""},Lt={CHANGE_SCROLL:"changeScroll",REQUEST_APPEND:"requestAppend",REQUEST_PREPEND:"requestPrepend",RENDER_COMPLETE:"renderComplete",CONTENT_ERROR:"contentError"},Nt={type:!0,groupKey:!0,key:!0,element:!0,html:!0,data:!0},x=["updateItems","getItems","getVisibleItems","getGroups","getVisibleGroups","renderItems","getContainerElement","getScrollContainerElement","getWrapperElement","setStatus","getStatus","removePlaceholders","prependPlaceholders","appendPlaceholders","getStartCursor","getEndCursor","setCursors"];(e=Ct=Ct||{})[e.NORMAL=0]="NORMAL",e[e.VIRTUAL=1]="VIRTUAL",e[e.LOADING=2]="LOADING",(t=Ot=Ot||{})[t.NORMAL=0]="NORMAL",t[t.VIRTUAL=1]="VIRTUAL",t[t.LOADING=2]="LOADING",(e=Pt=Pt||{})[e.NOT_REMOVE=0]="NOT_REMOVE",e[e.MINIMIZE_INVISIBLE_ITEMS=1]="MINIMIZE_INVISIBLE_ITEMS",e[e.MINIMIZE_INVISIBLE_GROUPS=2]="MINIMIZE_INVISIBLE_GROUPS",e[e.REMOVE_INVISIBLE_GROUPS=3]="REMOVE_INVISIBLE_GROUPS";var At=function(r){function t(t,e){var n,i=r.call(this,t,_({html:"",type:Ot.NORMAL,cssRect:{top:-9999,left:-9999}},e))||this;return i.type===Ot.VIRTUAL&&((i.rect.width||i.rect.height)&&(i.mountState=J.UNMOUNTED),n=i.orgRect,t=i.rect,(e=i.cssRect).width?t.width=e.width:n.width&&(t.width=n.width),e.height?t.height=e.height:n.height&&(t.height=n.height)),i}o(t,r);var e=t.prototype;return e.getVirtualStatus=function(){return{type:Ot.VIRTUAL,groupKey:this.groupKey,key:this.key,orgRect:this.orgRect,rect:this.rect,cssRect:this.cssRect,attributes:this.attributes}},e.getMinimizedStatus=function(){var t=_(_({},r.prototype.getMinimizedStatus.call(this)),{type:Ot.NORMAL,groupKey:this.groupKey});return this.html&&(t.html=this.html),t},t}(lt),kt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="",t}o(t,e);var n=t.prototype;return n.getLoadingItem=function(){return this.items[0]||null},n.setLoadingItem=function(t){if(t){var e=this.getLoadingItem();if(e)for(var n in t)e[n]=t[n];else this.items=[new At(this.options.horizontal,_(_({},t),{type:Ot.LOADING,key:"__INFINITEGRID__LOADING_ITEM"}))]}else this.items=[]},n.applyGrid=function(t,e,n){if(!t.length)return{start:n,end:n};var n=n.length?h(n):[0],t=t[0],i=t.contentSize+this.gap;if(t.cssInlinePos=this.getContainerInlineSize()/2-t.inlineSize/2,"end"===e){var r=Math.max.apply(Math,n);return t.cssContentPos=r,{start:n,end:n.map(function(t){return t+i})}}r=Math.min.apply(Math,n);return t.cssContentPos=r-i,{start:n.map(function(t){return t-i}),end:n}},t}(ft);function Gt(t){return t===window}function Ut(t){return"string"==typeof t}function Kt(t){return t.reduce(function(t,e){return h(t,e)},[])}function Vt(t){var e,n={},i={},r=ft.defaultOptions;for(e in t){var o=t[e];e in Mt||(i[e]=o),e in r&&(n[e]=o)}return _(_({},n),{gridOptions:i})}function jt(t){var i,r=[],o={},s={};t.filter(function(t){return null!=t.groupKey}).forEach(function(t){t=t.groupKey;s[t]=!0});var a=!1;return t.forEach(function(t){null!=t.groupKey?a=!1:(a||(i=Wt(s),a=!0,s[i]=!0),t.groupKey=i);var e=t.groupKey,n=o[e];n||(o[e]=n={groupKey:e,items:[]},r.push(n)),n.items.push(t)}),r}function Ft(t,e,n,i){var e=F(t,e,function(t){return t}),r=-1,o=-1;return e.maintained.forEach(function(t){var e=t[0],t=t[1];n<=e&&e<=i&&(o=-1===r?r=t:(r=Math.min(r,t),Math.max(o,t)))}),{startCursor:r,endCursor:o}}function qt(t,e,n){var i,r=[];if("start"===e){if(-1===(i=Xt(t,function(t){return t.type===Ct.NORMAL})))return[];r=t.slice(0,i)}else{if(-1===(i=Qt(t,function(t){return t.type===Ct.NORMAL})))return[];r=t.slice(i+1)}return F(r,n,function(t){return t.groupKey}).removed.map(function(t){return r[t]}).reverse()}function Yt(t){var e,i=t.prototype;for(e in t.propertyTypes)!function(n){Object.defineProperty(i,n,{enumerable:!0,configurable:!0,get:function(){var t=this.groupManager.options;return(n in t?t:t.gridOptions)[n]},set:function(t){var e;this.groupManager[n]!==t&&(this.groupManager.gridOptions=((e={})[n]=t,e))}})}(e)}function Wt(t){for(var e=0;;){var n="infinitegrid_"+e++;if(!(n in t))return n}}function Ht(t){var e=document.createElement("div");return e.innerHTML=t,Zt(e.children)}function Bt(t,i){t=Ut(t)?Ht(t):t;return t.map(function(t){var e,n="";if(Ut(t))n=t;else{if(!("parentNode"in t))return _({groupKey:i},t);n=(e=t).outerHTML}return{key:void 0,groupKey:i,html:n,element:e}})}function Zt(t){var e=[];if(t)for(var n=t.length,i=0;i<n;i++)e.push(t[i]);return e}function Xt(t,e){for(var n=t.length,i=0;i<n;++i)if(e(t[i],i))return i;return-1}function Qt(t,e){for(var n=t.length-1;0<=n;--n)if(e(t[n],n))return n;return-1}function Jt(t,n){return t.length===n.length&&t.every(function(t,e){return n[e]===t})}function $t(t){return Kt(t.map(function(t){return t.grid.getItems()}))}function te(t,e){return e?t:t.filter(function(t){return t.type!==Ot.VIRTUAL})}var ee,ne,t=(ee=x,function(t,r){ee.forEach(function(i){i in t||(t[i]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=(n=this[r])[i].apply(n,t);return n===this[r]?this:n})})}),ie=function(i){function t(t,e){var n,n=i.call(this,t,(e=(n=e).gridOptions,n=E(n,["gridOptions"]),_(_({},Vt(e)),n)))||this;return n.groupItems=[],n.groups=[],n.itemKeys={},n.groupKeys={},n.startCursor=0,n.endCursor=0,n._placeholder=null,n._loadingGrid=new kt(t,{externalContainerManager:n.containerManager,useFit:!1,autoResize:!1,renderOnPropertyChange:!1,gap:n.gap}),n._mainGrid=n._makeGrid(),n}o(t,i);var e=t.prototype;return Object.defineProperty(e,"gridOptions",{set:function(n){var t,e=Vt(n),i=e.gridOptions,r=E(e,["gridOptions"]),e=this._checkShouldRender(n);for(t in this.options.gridOptions=_(_({},this.options.gridOptions),i),h([this._mainGrid],this.groups.map(function(t){return t.grid})).forEach(function(t){for(var e in n)t[e]=n[e]}),r)this[t]=r[t];this._loadingGrid.gap=this.gap,e&&this.scheduleRender()},enumerable:!1,configurable:!0}),e.getItemByKey=function(t){return this.itemKeys[t]||null},e.getGroupItems=function(t){return te(this.groupItems,t)},e.getVisibleItems=function(t){return te(this.items,t)},e.getRenderingItems=function(){return this.hasPlaceholder()?this.items:this.items.filter(function(t){return t.type!==Ot.VIRTUAL})},e.getGroups=function(t){return te(this.groups,t)},e.hasVisibleVirtualGroups=function(){return this.getVisibleGroups(!0).some(function(t){return t.type===Ct.VIRTUAL})},e.hasPlaceholder=function(){return!!this._placeholder},e.hasLoadingItem=function(){return!!this._getLoadingItem()},e.setPlaceholder=function(t){this._placeholder=t,this._updatePlaceholder()},e.getLoadingType=function(){return this._loadingGrid.type},e.startLoading=function(t){return this._loadingGrid.type=t,this.items=this._getRenderingItems(),!0},e.endLoading=function(){var t=this._loadingGrid.type;return this._loadingGrid.type="",this.items=this._getRenderingItems(),!!t},e.setLoading=function(t){this._loadingGrid.setLoadingItem(t),this.items=this._getRenderingItems()},e.getVisibleGroups=function(t){return te(this.groups.slice(this.startCursor,this.endCursor+1),t)},e.getComputedOutlineLength=function(t){return void 0===t&&(t=this.items),this._mainGrid.getComputedOutlineLength(t)},e.getComputedOutlineSize=function(t){return void 0===t&&(t=this.items),this._mainGrid.getComputedOutlineSize(t)},e.applyGrid=function(t,i,e){var r=this;t.forEach(function(t){t.mountState=J.MOUNTED});var n=this.groups.slice();if(!n.length)return{start:[],end:[]};var o=this._loadingGrid;o.getLoadingItem()&&("start"===o.type?n.unshift(this._getLoadingGroup()):"end"===o.type&&n.push(this._getLoadingGroup()));var o=n.slice(),s=e;"start"===i&&o.reverse();var a=this.getComputedOutlineLength(t),u=this.getComputedOutlineSize(t);return o.forEach(function(t){var e=t.grid,n=e.getItems(),t=t.type===Ct.VIRTUAL&&!n[0],n=n.filter(function(t){return t.mountState!==J.UNCHECKED&&t.rect.width});e.outlineLength=a,e.outlineSize=u,n=t?r._applyVirtualGrid(e,i,s):n.length?e.applyGrid(n,i,s):{start:h(s),end:h(s)},e.setOutlines(n),s=n[i]}),{start:n[0].grid.getOutlines().start,end:n[n.length-1].grid.getOutlines().end}},e.syncItems=function(t){var o=this,e=this.itemKeys;this.itemKeys={};var n=this._syncItemInfos(t.map(function(t){var e,n={};for(e in t)e in Nt&&(n[e]=t[e]);return n}),e),s=this.groupKeys,t=jt(n),e=this._splitVirtualGroups("start",t),n=this._splitVirtualGroups("end",t),t=(t=h(e,this._mergeVirtualGroups(t),n)).map(function(t){var e=t.groupKey,n=t.items,i=!n[0]||n[0].type===Ot.VIRTUAL,r=null!==(t=null===(r=s[e])||void 0===r?void 0:r.grid)&&void 0!==t?t:o._makeGrid(),t=i?n:n.filter(function(t){return t.type===Ot.NORMAL});return r.setItems(t),{type:i?Ct.VIRTUAL:Ct.NORMAL,groupKey:e,grid:r,items:t,renderItems:n}});this._registerGroups(t)},e.renderItems=function(t){var e;return(t=void 0===t?{}:t).useResize&&(this.groupItems.forEach(function(t){t.updateState=$.NEED_UPDATE}),(e=this._getLoadingItem())&&(e.updateState=$.NEED_UPDATE)),i.prototype.renderItems.call(this,t)},e.setCursors=function(t,e){this.startCursor=t,this.endCursor=e,this.items=this._getRenderingItems()},e.getStartCursor=function(){return this.startCursor},e.getEndCursor=function(){return this.endCursor},e.getGroupStatus=function(t){var e=this.startCursor,n=this.endCursor,i=this.groups,o=e,s=n,a=t===Pt.MINIMIZE_INVISIBLE_ITEMS,u=t===Pt.MINIMIZE_INVISIBLE_GROUPS;t===Pt.REMOVE_INVISIBLE_GROUPS?(h=this.getVisibleGroups(),s-=o,o=0):h=this.getGroups();var r=h.map(function(t,e){var n=t.grid,i=t.groupKey,t=e<o||s<e,r=a&&t,e=u&&t,t=n.getItems(),t=e?[]:t.map(function(t){return r?t.getVirtualStatus():t.getMinimizedStatus()});return{type:e||r?Ct.VIRTUAL:Ct.NORMAL,groupKey:i,outlines:n.getOutlines(),items:t}}),c=i[e],t=i[n],h=this.getGroupItems(),i=h.indexOf(null==c?void 0:c.items[0]),h=h.indexOf(null==t?void 0:t.items.slice().reverse()[0]);return{cursors:[o,s],orgCursors:[e,n],itemCursors:[i,h],startGroupKey:null==c?void 0:c.groupKey,endGroupKey:null==t?void 0:t.groupKey,groups:r,outlines:this.outlines}},e.setGroupStatus=function(t){var o=this;this.itemKeys={},this.groupItems=[],this.items=[];var s=this.groupKeys,e=t.groups.map(function(t){var e=t.type,n=t.groupKey,i=t.items,r=t.outlines,t=o._syncItemInfos(i),i=null!==(i=null===(i=s[n])||void 0===i?void 0:i.grid)&&void 0!==i?i:o._makeGrid();return i.setOutlines(r),i.setItems(t),{type:e,groupKey:n,grid:i,items:t,renderItems:t}});this.setOutlines(t.outlines),this._registerGroups(e),this._updatePlaceholder(),this.setCursors(t.cursors[0],t.cursors[1])},e.appendPlaceholders=function(t,e){return this.insertPlaceholders("end",t,e)},e.prependPlaceholders=function(t,e){return this.insertPlaceholders("start",t,e)},e.removePlaceholders=function(t){var e,n,i=this.groups,r=i.length;"start"===t?(n=Xt(i,function(t){return t.type===Ct.NORMAL}),i.splice(0,n)):"end"===t?(n=Qt(i,function(t){return t.type===Ct.NORMAL}),i.splice(n+1,r-n-1)):(e=t.groupKey,-1<(n=Xt(i,function(t){return t.groupKey===e}))&&i.splice(n,1)),this.syncItems($t(this.getGroups()))},e.insertPlaceholders=function(t,e,n){var i;void 0===n&&(n=Wt(this.groupKeys));var r=[];"number"==typeof e?r=function(t){for(var e=[],n=0;n<t;++n)e.push(n);return e}(e).map(function(){return{type:Ot.VIRTUAL,groupKey:n}}):Array.isArray(e)&&(r=e.map(function(t){return _(_({groupKey:n},t),{type:Ot.VIRTUAL})}));e=this._makeGrid(),r=this._syncItemInfos(r,this.itemKeys);this._updatePlaceholder(r),e.setItems(r);e={type:Ct.VIRTUAL,groupKey:n,grid:e,items:r,renderItems:r};return this.groupKeys[n]=e,"end"===t?(this.groups.push(e),(i=this.groupItems).push.apply(i,r)):(this.groups.splice(0,0,e),(i=this.groupItems).splice.apply(i,h([0,0],r)),-1<this.startCursor&&(++this.startCursor,++this.endCursor)),{group:e,items:r}},e.shouldRerenderItems=function(){var n=!1;return this.getVisibleGroups().forEach(function(t){var e=t.items;e.length===t.renderItems.length||e.every(function(t){return t.mountState===J.UNCHECKED})||(n=!0,t.renderItems=h(e))}),n&&(this.items=this._getRenderingItems()),n},e._getGroupItems=function(){return $t(this.getGroups(!0))},e._getRenderingItems=function(){var t=Kt(this.getVisibleGroups(!0).map(function(t){return t.renderItems})),e=this._loadingGrid,n=e.getLoadingItem();return n&&("end"===e.type?t.push(n):"start"===e.type&&t.unshift(n)),t},e._checkShouldRender=function(t){var e,n=this.options.gridConstructor,i=this.gridOptions,r=n.propertyTypes;for(e in i)if(!(e in t)&&r[e]===Q.RENDER_PROPERTY)return!0;for(e in t)if(i[e]!==t[e]&&r[e]===Q.RENDER_PROPERTY)return!0;return!1},e._applyVirtualGrid=function(t,e,n){var i=n.length?h(n):[0],t=t.getOutlines(),e=t["end"===e?"start":"end"];return e.length!==i.length||e.some(function(t,e){return t!==i[e]})?{start:h(i),end:h(i)}:t},e._syncItemInfos=function(t,r){void 0===r&&(r={});var o=this.options.horizontal,s=this.itemKeys;return t.filter(function(t){return null!=t.key}).forEach(function(t){var e=t.key,n=r[e];n?n.type===Ot.VIRTUAL&&t.type!==Ot.VIRTUAL?s[e]=new At(o,_({orgRect:n.orgRect,rect:n.rect},t)):(t.data&&(n.data=t.data),s[e]=n):s[e]=new At(o,_({},t))}),t.map(function(t){var e=t.key;null==t.key&&(e=Wt(s));var n,i=s[e];return i||((n=r[e])?(i=n,t.data&&(i.data=t.data)):i=new At(o,_(_({},t),{key:e})),s[e]=i),i})},e._registerGroups=function(t){var e={};t.forEach(function(t){e[t.groupKey]=t}),this.groups=t,this.groupKeys=e,this.groupItems=this._getGroupItems()},e._splitVirtualGroups=function(t,e){var e=qt(this.groups,t,e),n=this.itemKeys;return e.forEach(function(t){t.renderItems.forEach(function(t){n[t.key]=t})}),e},e._mergeVirtualGroups=function(t){var i=this.itemKeys,r=this.groupKeys;return t.forEach(function(t){var e,n=r[t.groupKey];!n||(e=t.items).every(function(t){return t.mountState===J.UNCHECKED})&&n.renderItems.forEach(function(t){t.type!==Ot.VIRTUAL||i[t.key]||(e.push(t),i[t.key]=t)})}),t},e._updatePlaceholder=function(t){void 0===t&&(t=this.groupItems);var e=this._placeholder;e&&t.filter(function(t){return t.type===Ot.VIRTUAL}).forEach(function(t){!function(t,e){for(var n in e){var i=e[n];t[n]="object"==typeof i?_(_({},t[n]),i):e[n]}}(t,e)})},e._makeGrid=function(){var t=this.options.gridConstructor,e=this.gridOptions;return new t(this.containerElement,_(_({},e),{useFit:!1,autoResize:!1,renderOnPropertyChange:!1,externalContainerManager:this.containerManager,externalItemRenderer:this.itemRenderer}))},e._getLoadingGroup=function(){var t=this._loadingGrid,e=t.getItems();return{groupKey:"__INFINITEGRID__LOADING_GRID",type:Ct.NORMAL,grid:t,items:e,renderItems:e}},e._getLoadingItem=function(){return this._loadingGrid.getLoadingItem()},t.defaultOptions=_(_({},ft.defaultOptions),{gridConstructor:null,gridOptions:{}}),t.propertyTypes=_(_({},ft.propertyTypes),{gridConstructor:Q.PROPERTY,gridOptions:Q.PROPERTY}),n([ot],t)}(ft),re=function(n){function t(t){var e=n.call(this)||this;return e.startCursor=-1,e.endCursor=-1,e.size=0,e.items=[],e.itemKeys={},e.options=_({threshold:0,useRecycle:!0,defaultDirection:"end"},t),e}o(t,n);var e=t.prototype;return e.scroll=function(n){var i,t,e,r,o=this.startCursor,s=this.endCursor,a=this.items,u=a.length,c=this.size,h=this.options,l=h.defaultDirection,f=h.threshold,d=h.useRecycle,p="end"===l;u?-1!==o&&-1!==s?(i=n+c,t=Math.max.apply(Math,a[o].startOutline),e=Math.min.apply(Math,a[s].endOutline),r=a.map(function(t){var e=t.startOutline,t=t.endOutline;if(!e.length||!t.length)return!1;e=Math.min.apply(Math,e),t=Math.max.apply(Math,t);return e-f<=i&&n<=t+f}),h=0<o,l=s<u-1,c=n<=t+f,t=e-f<=i,e=r.indexOf(!0),r=r.lastIndexOf(!0),-1===e&&(e=o,r=s),d||(e=Math.min(e,o),r=Math.max(r,s)),e===o&&h&&c&&--e,r===s&&l&&t&&(r+=1),o!==e||s!==r?this.trigger("change",{prevStartCursor:o,prevEndCursor:s,nextStartCursor:e,nextEndCursor:r}):this._requestVirtualItems()||(p&&t||!c?!p&&c||!t||this.trigger("requestAppend",{key:a[s].key,isVirtual:!1}):this.trigger("requestPrepend",{key:a[o].key,isVirtual:!1}))):this.trigger("change",{prevStartCursor:o,prevEndCursor:s,nextStartCursor:u=p?0:u-1,nextEndCursor:u}):this.trigger(p?"requestAppend":"requestPrepend",{key:void 0,isVirtual:!1})},e._requestVirtualItems=function(){var t="end"===this.options.defaultDirection,e=this.items,n=this.getVisibleItems(),i=n.filter(function(t){return!t.isVirtual}),r=n.length,o=i.length,s=this.getStartCursor(),a=this.getEndCursor();if(o===r)return!1;if(o){var u=i[0].key,c=i[o-1].key,i=Xt(e,function(t){return t.key===u})-1,o=Xt(e,function(t){return t.key===c})+1,a=o<=a,s=s<=i;if((t||!s)&&a)return this.trigger("requestAppend",{key:c,nextKey:e[o].key,isVirtual:!0}),!0;if((!t||!a)&&s)return this.trigger("requestPrepend",{key:u,nextKey:e[i].key,isVirtual:!0}),!0}else if(r){r=n[r-1];return t?this.trigger("requestAppend",{nextKey:n[0].key,isVirtual:!0}):this.trigger("requestPrepend",{nextKey:r.key,isVirtual:!0}),!0}return!1},e.setCursors=function(t,e){this.startCursor=t,this.endCursor=e},e.setSize=function(t){this.size=t},e.getStartCursor=function(){return this.startCursor},e.getEndCursor=function(){return this.endCursor},e.isLoading=function(t){var e=this.startCursor,n=this.endCursor,i=this.items,r=i[e],o=i[n],i=i.length;return!(t===xt.END&&-1<n&&n<i-1&&!o.isVirtual&&!Jt(o.startOutline,o.endOutline))&&!(t===xt.START&&0<e&&!r.isVirtual&&!Jt(r.startOutline,r.endOutline))},e.setItems=function(t){this.items=t;var e={};t.forEach(function(t){e[t.key]=t}),this.itemKeys=e},e.syncItems=function(t){var e=this.items,n=this.startCursor,i=this.endCursor,r=Ft(this.items.map(function(t){return t.key}),t.map(function(t){return t.key}),n,i),o=r.startCursor,s=r.endCursor,r=s-o!=i-n||-1===n||-1===o;return r||(r=0<(i=F(e.slice(n,i+1),t.slice(o,s+1),function(t){return t.key})).added.length||0<i.removed.length||0<i.changed.length),this.setItems(t),this.setCursors(o,s),r},e.getItems=function(){return this.items},e.getVisibleItems=function(){var t=this.startCursor,e=this.endCursor;return-1===t?[]:this.items.slice(t,e+1)},e.getItemByKey=function(t){return this.itemKeys[t]},e.getRenderedVisibleItems=function(){var t=this.getVisibleItems(),e=t.map(function(t){var e=t.startOutline,n=t.endOutline,t=e.length;return 0!==t&&t===n.length&&e.some(function(t,e){return n[e]!==t})}),n=e.indexOf(!0),e=e.lastIndexOf(!0);return-1===e?[]:t.slice(n,e+1)},e.destroy=function(){this.off(),this.startCursor=-1,this.endCursor=-1,this.items=[],this.size=0},t}(a),e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.items=[],t.container=null,t.rendererKey=0,t._updateTimer=0,t._state={},t._isItemChanged=!1,t}o(t,e);var n=t.prototype;return n.updateKey=function(){this.rendererKey=Date.now()},n.getItems=function(){return this.items},n.setContainer=function(t){this.container=t},n.render=function(t,e){return this.syncItems(t,e)},n.update=function(t){var e=this;void 0===t&&(t={}),this._state=_(_({},this._state),t),this.trigger("update",{state:t}),clearTimeout(this._updateTimer),this._updateTimer=window.setTimeout(function(){e.trigger("requestUpdate",{state:t})})},n.updated=function(n){void 0===n&&(n=null!==(r=null===(i=this.container)||void 0===i?void 0:i.children)&&void 0!==r?r:[]);var t=this._diffResult,e=!!(t.added.length||t.removed.length||t.changed.length),i=this._state,r=this._isItemChanged,t=t.list;return this._isItemChanged=!1,this._state={},(this.items=t).forEach(function(t,e){t.element=n[e]}),this.trigger("updated",{items:t,elements:Zt(n),diffResult:this._diffResult,state:i,isItemChanged:r,isChanged:e}),e},n.syncItems=function(t,e){void 0===e&&(e={});var n=this.rendererKey,t=F(this.items,t.map(function(t){return _(_({},t),{renderKey:n+"_"+t.key})}),function(t){return t.renderKey});return this._isItemChanged=!!t.added.length||!!t.removed.length||!!t.changed.length,this._state=_(_({},this._state),e),this._diffResult=t},n.destroy=function(){this.off()},t}(a),oe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return o(t,r),t.prototype.syncItems=function(n){var t=r.prototype.syncItems.call(this,n),e=t.added,i=t.list;return e.forEach(function(t){var e=n[t].orgItem;e.html&&!e.element&&(e.element=Ht(e.html)[0]),i[t].element=e.element}),t},t}(function(u){function t(){return null!==u&&u.apply(this,arguments)||this}return o(t,u),t.prototype.render=function(t,e){var n=this.container,i=u.prototype.render.call(this,t,e),r=i.prevList,o=i.removed,t=i.ordered,e=i.added,s=i.list,a=h(r);return o.forEach(function(t){a.splice(t,1),n.removeChild(r[t].element)}),t.forEach(function(t){var e=t[0],t=t[1],e=a.splice(e,1)[0];a.splice(t,0,e),n.insertBefore(e.element,null!==(t=null===(t=a[t+1])||void 0===t?void 0:t.element)&&void 0!==t?t:null)}),e.forEach(function(t){var e=s[t];a.splice(t,0,e),n.insertBefore(e.element,null!==(t=null===(t=a[t+1])||void 0===t?void 0:t.element)&&void 0!==t?t:null)}),this.updated(n.children),i},t}(e)),se=function(i){function t(t,e){var n=i.call(this)||this;return n.wrapper=t,n.prevScrollPos=null,n.scrollOffset=0,n.contentSize=0,n._isScrollIssue=wt,n._onCheck=function(){var t=n.getScrollPos(),e=n.getOrgScrollPos();n.setScrollPos(e),null===t||n._isScrollIssue&&0===e||t===e?e&&(n._isScrollIssue=!1):(n._isScrollIssue=!1,n.trigger(new z("scroll",{direction:t<e?"end":"start",scrollPos:e,relativeScrollPos:n.getRelativeScrollPos()})))},n.options=_({container:!1,containerTag:"div",horizontal:!1},e),n._init(),n}o(t,i);var e=t.prototype;return e.getWrapper=function(){return this.wrapper},e.getContainer=function(){return this.container},e.getScrollContainer=function(){return this.scrollContainer},e.getScrollOffset=function(){return this.scrollOffset},e.getContentSize=function(){return this.contentSize},e.getRelativeScrollPos=function(){return(this.prevScrollPos||0)-this.scrollOffset},e.getScrollPos=function(){return this.prevScrollPos},e.setScrollPos=function(t){this.prevScrollPos=t},e.getOrgScrollPos=function(){var t=this.eventTarget,e=this.options.horizontal,n="scroll"+(e?"Left":"Top");return Gt(t)?window[e?"pageXOffset":"pageYOffset"]||document.documentElement[n]||document.body[n]:t[n]},e.setStatus=function(t){this.contentSize=t.contentSize,this.scrollOffset=t.scrollOffset,this.prevScrollPos=t.prevScrollPos,this.scrollTo(this.prevScrollPos)},e.getStatus=function(){return{contentSize:this.contentSize,scrollOffset:this.scrollOffset,prevScrollPos:this.prevScrollPos}},e.scrollTo=function(t){var e=this.eventTarget,n=this.options.horizontal?[t,0]:[0,t],t=n[0],n=n[1];Gt(e)?e.scroll(t,n):(e.scrollLeft=t,e.scrollTop=n)},e.scrollBy=function(t){var e,n,i;t&&(e=this.eventTarget,n=(i=this.options.horizontal?[t,0]:[0,t])[0],i=i[1],this.prevScrollPos+=t,Gt(e)?e.scrollBy(n,i):(e.scrollLeft+=n,e.scrollTop+=i))},e.resize=function(){var t=this.scrollContainer,e=this.options.horizontal,n=t===document.body,i=n?{top:0,left:0}:t.getBoundingClientRect(),r=this.container.getBoundingClientRect();this.scrollOffset=(this.prevScrollPos||0)+(e?r.left-i.left:r.top-i.top),this.contentSize=n?e?window.innerWidth:window.innerHeight:e?t.offsetWidth:t.offsetHeight},e.destroy=function(){var t,e,n,i=this.container;this.eventTarget.removeEventListener("scroll",this._onCheck),this._isCreateElement?(t=this.scrollContainer,e=document.createDocumentFragment(),n=Zt(i.childNodes),t.removeChild(i),n.forEach(function(t){e.appendChild(t)}),t.appendChild(e)):this.options.container&&(i.style.cssText=this._orgCSSText)},e._init=function(){var t=this.options,e=t.container,n=t.containerTag,i=t.horizontal,r=this.wrapper,t=r,o=r,r="";e?(e instanceof HTMLElement?o=e:!0===e?((o=document.createElement(n)).style.position="relative",o.className=bt,Zt(t.childNodes).forEach(function(t){o.appendChild(t)}),t.appendChild(o),this._isCreateElement=!0):o=t.querySelector(e),r=o.style.cssText,(n=t.style).overflowX=(e=i?["scroll","hidden"]:["hidden","scroll"])[0],n.overflowY=e[1],i&&(o.style.height="100%")):(t=document.body,r=o.style.cssText);i=t===document.body?window:t;i.addEventListener("scroll",this._onCheck),this._orgCSSText=r,this.container=o,this.scrollContainer=t,this.eventTarget=i,this.resize(),this.setScrollPos(this.getOrgScrollPos())},t}(a),ae=function(S){function t(t,e){var u=S.call(this)||this;u._waitType="",u._onScroll=function(t){var e=t.direction,n=t.scrollPos,t=t.relativeScrollPos;u._scroll(),u.trigger(new z(Lt.CHANGE_SCROLL,{direction:e,scrollPos:n,relativeScrollPos:t}))},u._onChange=function(t){u.setCursors(t.nextStartCursor,t.nextEndCursor)},u._onRendererUpdated=function(t){if(!t.isChanged)return u._checkEndLoading(),void u._scroll();var e=t.items,n=t.diffResult,i=n.added,r=n.removed,o=n.prevList,s=n.list;r.forEach(function(t){t=o[t].orgItem;t.mountState!==J.UNCHECKED&&(t.mountState=J.UNMOUNTED)}),e.forEach(function(t){t.orgItem.element=t.element});var a=u.options.horizontal,n=i.map(function(t){var e=s[t].orgItem,n=e.element;if(e.type!==Ot.VIRTUAL)return e;t=_({},e.cssRect),e=e.rect;return!t.width&&e.width&&(t.width=e.width),!t.height&&e.height&&(t.height=e.height),new lt(a,{element:n,cssRect:t})}),r=t.state,e=r.isRestore,r=r.isResize;u.itemRenderer.renderItems(n),e&&u._onRenderComplete({mounted:i.map(function(t){return s[t].orgItem}),updated:[],isResize:!1,direction:u.defaultDirection}),e&&!r&&!t.isItemChanged||u.groupManager.renderItems()},u._onResize=function(){u.containerManager.setRect(u.watcher.getRect()),u._renderItems({useResize:!0},!0)},u._onRequestAppend=function(t){u._onRequestInsert(xt.END,Lt.REQUEST_APPEND,t)},u._onRequestPrepend=function(t){u._onRequestInsert(xt.START,Lt.REQUEST_PREPEND,t)},u._onContentError=function(t){var e=t.element,n=t.target,i=t.item,t=t.update;u.trigger(new z(Lt.CONTENT_ERROR,{element:e,target:n,item:i,update:t,remove:function(){u.removeByKey(i.key)}}))},u._onRenderComplete=function(t){var e=t.isResize,n=t.mounted,i=t.updated,r=t.direction,o=u.infinite,s=o.getRenderedVisibleItems(),a=s.length,t=r===xt.END;u._syncInfinite(),a&&(a=s[t?0:a-1],o=o.getItemByKey(a.key),a=t?Math.min.apply(Math,o.startOutline)-Math.min.apply(Math,a.startOutline):Math.max.apply(Math,o.endOutline)-Math.max.apply(Math,a.endOutline),u.scrollManager.scrollBy(a)),u.trigger(new z(Lt.RENDER_COMPLETE,{isResize:e,direction:r,mounted:n.filter(function(t){return t.type!==Ot.LOADING}),updated:i.filter(function(t){return t.type!==Ot.LOADING}),startCursor:u.getStartCursor(),endCursor:u.getEndCursor(),items:u.getVisibleItems(!0),groups:u.getVisibleGroups(!0)})),u.groupManager.shouldRerenderItems()?u._update():(u._checkEndLoading(),u._scroll())},u.options=_(_(_({},u.constructor.defaultOptions),{renderer:(new oe).on("requestUpdate",function(){return u._render()})}),e);var n=u.options,i=n.gridConstructor,r=n.containerTag,o=n.container,s=n.renderer,a=n.threshold,c=n.useRecycle,h=E(n,["gridConstructor","containerTag","container","renderer","threshold","useRecycle"]),l=h.horizontal,f=h.attributePrefix,d=h.useTransform,p=h.percentage,g=h.isConstantSize,m=h.isEqualSize,y=h.autoResize,v=h.useResizeObserver,R=h.resizeDebounce,e=h.maxResizeDebounce,n=Ut(t)?document.querySelector(t):t,t=new se(n,{container:o,containerTag:r,horizontal:l}).on({scroll:u._onScroll}),o=t.getContainer(),r=new ct(o,{horizontal:l,autoResize:!1}),v=new ut(n,{resizeDebounce:R,maxResizeDebounce:e,useWindowResize:y,useResizeObserver:y&&v,watchDirection:!!v&&(l?"height":"width")}).listen(u._onResize),g=new ht({attributePrefix:f,horizontal:l,useTransform:d,percentage:p,isEqualSize:m,isConstantSize:g}),a=new re({useRecycle:c,threshold:a}).on({change:u._onChange,requestAppend:u._onRequestAppend,requestPrepend:u._onRequestPrepend});a.setSize(t.getContentSize());h=new ie(o,{gridConstructor:i,externalItemRenderer:g,externalContainerManager:r,gridOptions:h});return h.on({renderComplete:u._onRenderComplete,contentError:u._onContentError}),s.setContainer(o),s.on("updated",u._onRendererUpdated),u.watcher=v,u.itemRenderer=g,u.groupManager=h,u.wrapperElement=n,u.scrollManager=t,u.containerManager=r,u.infinite=a,u.watcher.resize(),u.containerManager.setRect(u.watcher.getRect()),u}o(t,S);var e=t.prototype;return e.renderItems=function(t){return this._renderItems(t=void 0===t?{}:t),this},e.getWrapperElement=function(){return this.scrollManager.getWrapper()},e.getScrollContainerElement=function(){return this.scrollManager.getScrollContainer()},e.getContainerElement=function(){return this.scrollManager.getContainer()},e.syncItems=function(t){return this.groupManager.syncItems(t),this._syncGroups(),this},e.setCursors=function(t,e,n){return this.groupManager.setCursors(t,e),this.infinite.setCursors(t,e),n?this._syncItems():(this._update(),this._checkEndLoading()),this},e.getStartCursor=function(){return this.infinite.getStartCursor()},e.getEndCursor=function(){return this.infinite.getEndCursor()},e.append=function(t,e){return this.insert(-1,t,e)},e.prepend=function(t,e){return this.insert(0,t,e)},e.insert=function(t,e,n){var i=this.groupManager.getGroupItems(),n=Bt(e,n);return-1===t?i.push.apply(i,n):i.splice.apply(i,h([t,0],n)),this.syncItems(i)},e.getStatus=function(t){return{containerManager:this.containerManager.getStatus(),itemRenderer:this.itemRenderer.getStatus(),groupManager:this.groupManager.getGroupStatus(t),scrollManager:this.scrollManager.getStatus()}},e.setPlaceholder=function(t){return this.groupManager.setPlaceholder(t),this},e.setLoading=function(t){return this.groupManager.setLoading(t),this},e.appendPlaceholders=function(t,e){var n=this,i=this.groupManager.appendPlaceholders(t,e);return this._syncGroups(!0),_(_({},i),{remove:function(){n.removePlaceholders({groupKey:i.group.groupKey})}})},e.prependPlaceholders=function(t,e){var n=this,i=this.groupManager.prependPlaceholders(t,e);return this._syncGroups(!0),_(_({},i),{remove:function(){n.removePlaceholders({groupKey:i.group.groupKey})}})},e.removePlaceholders=function(t){this.groupManager.removePlaceholders(t),this._syncGroups(!0)},e.setStatus=function(t,e){this.itemRenderer.setStatus(t.itemRenderer),this.containerManager.setStatus(t.containerManager),this.scrollManager.setStatus(t.scrollManager);var n=this.groupManager,i=this.containerManager.getInlineSize();n.setGroupStatus(t.groupManager),this._syncInfinite(),this.infinite.setCursors(n.getStartCursor(),n.getEndCursor()),this._getRenderer().updateKey();i={isResize:this.containerManager.getInlineSize()!==i,isRestore:!0};return e?this._syncItems(i):this._update(i),this},e.removeGroupByIndex=function(t){var e=this.groupManager.getGroups();return this.removeGroupByKey(e[t].groupKey)},e.removeGroupByKey=function(e){var t=this.groupManager.getItems(),n=Xt(t,function(t){return t.groupKey===e}),i=Qt(t,function(t){return t.groupKey===e});return-1===n?this:(t.splice(n,i-n+1),this.syncItems(t))},e.removeByIndex=function(t){var e=this.getItems(!0);return e.splice(t,1),this.syncItems(e)},e.removeByKey=function(e){var t=Xt(this.getItems(!0),function(t){return t.key===e});return this.removeByIndex(t)},e.updateItems=function(t,e){return this.groupManager.updateItems(t,e=void 0===e?{}:e),this},e.getItems=function(t){return this.groupManager.getGroupItems(t)},e.getVisibleItems=function(t){return this.groupManager.getVisibleItems(t)},e.getRenderingItems=function(){return this.groupManager.getRenderingItems()},e.getGroups=function(t){return this.groupManager.getGroups(t)},e.getVisibleGroups=function(t){return this.groupManager.getVisibleGroups(t)},e.wait=function(t){this._waitType=t=void 0===t?xt.END:t,this._checkStartLoading(t)},e.ready=function(){this._waitType=""},e.isWait=function(){return!!this._waitType},e.destroy=function(){this.off(),this.watcher.destroy(),this.groupManager.destroy(),this.scrollManager.destroy(),this.infinite.destroy()},e._getRenderer=function(){return this.options.renderer},e._getRendererItems=function(){return this.getRenderingItems().map(function(t){return{element:t.element,key:t.type+"_"+t.key,orgItem:t}})},e._syncItems=function(t){this._getRenderer().syncItems(this._getRendererItems(),t)},e._render=function(t){this._getRenderer().render(this._getRendererItems(),t)},e._update=function(t){void 0===t&&(t={}),this._getRenderer().update(t)},e._resizeScroll=function(){var t=this.scrollManager;t.resize(),this.infinite.setSize(t.getContentSize())},e._syncGroups=function(t){var e=this.infinite;this._syncInfinite(),this.groupManager.setCursors(e.getStartCursor(),e.getEndCursor()),t?this._update():this._render()},e._syncInfinite=function(){this.infinite.syncItems(this.getGroups(!0).map(function(t){var e=t.groupKey,n=t.grid,t=t.type,n=n.getOutlines();return{key:e,isVirtual:t===Ct.VIRTUAL,startOutline:n.start,endOutline:n.end}}))},e._scroll=function(){this.infinite.scroll(this.scrollManager.getRelativeScrollPos())},e._onRequestInsert=function(t,e,n){var i=this;this._waitType?this._checkStartLoading(this._waitType):this.trigger(new z(e,{groupKey:n.key,nextGroupKey:n.nextKey,isVirtual:n.isVirtual,wait:function(){i.wait(t)},ready:function(){i.ready()}}))},e._renderItems=function(t,e){if(void 0===t&&(t={}),!e&&t.useResize&&(this.watcher.resize(),this.containerManager.resize()),this._resizeScroll(),this.getRenderingItems().length)return this.getVisibleGroups(!0).length?this.groupManager.renderItems(t):this.setCursors(0,0),this;t=Zt(this.getContainerElement().children);return 0<t.length?(this.groupManager.syncItems(Bt(t)),this._syncInfinite(),this.setCursors(0,0,!0),this._getRenderer().updated()):this.infinite.scroll(0),this},e._checkStartLoading=function(t){var e=this.groupManager,n=this.infinite;!e.getLoadingType()&&n.isLoading(t)&&e.startLoading(t)&&e.hasLoadingItem()&&this._update()},e._checkEndLoading=function(){var t=this.groupManager,e=this.groupManager.getLoadingType();!e||this._waitType&&this.infinite.isLoading(e)||!t.endLoading()||!t.hasLoadingItem()||this._update()},t.defaultOptions=_(_({},tt),{container:!1,containerTag:"div",renderer:null,threshold:100,useRecycle:!0}),t.propertyTypes=Dt,n([Yt],t)}(a),ue={__proto__:null,default:ae,withInfiniteGridMethods:t,getRenderingItems:function(t,e){var n,i,r=e.status,o=e.usePlaceholder,s=e.useLoading,a=e.horizontal,u=e.useFirstRender,c=e.grid,e=[];return c?(c.setPlaceholder(o?{}:null),c.setLoading(s?{}:null),c.syncItems(t),e=c.getRenderingItems()):r?(s=r.groupManager,c=t,r=!!o,i=!!a,o=s.groups,c=jt(c),c=h(qt(o,"start",c),c,qt(o,"end",c)),s=(o=Ft(o.map(function(t){return t.groupKey}),c.map(function(t){return t.groupKey}),s.cursors[0],s.cursors[1])).startCursor,o=o.endCursor,o=Kt(c.slice(s,o+1).map(function(t){return t.items.map(function(t){return new At(i,_({},t))})})),e=o=r?o:o.filter(function(t){return t.type!==Ot.VIRTUAL})):u&&(n=!!a,e=(t=jt(t=t))[0]?t[0].items.map(function(t){return new At(n,_({},t))}):[]),e},mountRenderingItems:function(t,e){var n=e.grid,i=e.usePlaceholder,r=e.useLoading,o=e.useFirstRender,e=e.status;n&&(i&&n.setPlaceholder({}),r&&n.setLoading({}),e&&n.setStatus(e,!0),n.syncItems(t),o&&!e&&n.getGroups().length&&n.setCursors(0,0,!0))},InfiniteGridItem:At,MasonryInfiniteGrid:function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.propertyTypes=_(_({},ae.propertyTypes),pt.propertyTypes),e.defaultOptions=_(_(_({},ae.defaultOptions),pt.defaultOptions),{gridConstructor:pt}),n([Yt],e)}(ae),JustifiedInfiniteGrid:function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.propertyTypes=_(_({},ae.propertyTypes),vt.propertyTypes),e.defaultOptions=_(_(_({},ae.defaultOptions),vt.defaultOptions),{gridConstructor:vt}),n([Yt],e)}(ae),FrameInfiniteGrid:function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.propertyTypes=_(_({},ae.propertyTypes),Et.propertyTypes),e.defaultOptions=_(_(_({},ae.defaultOptions),Et.defaultOptions),{gridConstructor:Et}),n([Yt],e)}(ae),PackingInfiniteGrid:function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.propertyTypes=_(_({},ae.propertyTypes),Tt.propertyTypes),e.defaultOptions=_(_(_({},ae.defaultOptions),Tt.defaultOptions),{gridConstructor:Tt}),n([Yt],e)}(ae),Renderer:e,IS_IOS:wt,CONTAINER_CLASS_NAME:bt,IGNORE_PROPERITES_MAP:Mt,INFINITEGRID_PROPERTY_TYPES:Dt,DIRECTION:xt,INFINITEGRID_EVENTS:Lt,ITEM_INFO_PROPERTIES:Nt,INFINITEGRID_METHODS:x,get GROUP_TYPE(){return Ct},get ITEM_TYPE(){return Ot},get STATUS_TYPE(){return Pt},INVISIBLE_POS:-9999};for(ne in ue)ae[ne]=ue[ne];return ae});
//# sourceMappingURL=infinitegrid.min.js.map
