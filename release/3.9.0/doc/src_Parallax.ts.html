<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: src/Parallax.ts | egjs::infinitegrid - API</title>
    
    <meta name="description" content="A module used to arrange card elements including content infinitely according to layout type. With this module, you can implement various layouts composed of different card elements whose sizes vary. It guarantees performance by maintaining the number of DOMs the module is handling under any circumstance" />
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <link rel="canonical" href="http://naver.github.io/egjs-infinitegrid/release/latest/doc/"/>
    
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"eg.InfiniteGrid","disqus":"egjs","googleAnalytics":"UA-70842526-18","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"egjs::infinitegrid - API","description":"A module used to arrange card elements including content infinitely according to layout type. With this module, you can implement various layouts composed of different card elements whose sizes vary. It guarantees performance by maintaining the number of DOMs the module is handling under any circumstance","keyword":""},"linenums":true,"link":{"canonical":"http://naver.github.io/egjs-infinitegrid/release/latest/doc/"}};
    </script>
    

    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', config.googleAnalytics]);
      _gaq.push(['_trackPageview']);
    
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName">
        <a href="//naver.github.io/egjs/"><img style="width:40px; height:20px;" src="img/type_white.svg"/></a>

        <!-- Homepage link (prefer link.home than applicationName) -->
        
        <a href="//naver.github.io/egjs-infinitegrid/">InfiniteGrid</a>
        
    </h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
        <li class="item">
            <span class="title">
                <a href="index.html">README</a>
            </span>
        </li>
    
        <!-- Non Grouping Version -->
        
            

<li class="item" data-name="eg.Parallax">
    <span class="title">
        <a href="eg.Parallax.html">eg.Parallax</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.Parallax#refresh"><a href="eg.Parallax.html#refresh">refresh</a></li>
    
        <li data-name="eg.Parallax#resize"><a href="eg.Parallax.html#resize">resize</a></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    </ul>

    
</li>

        
            

<li class="item" data-name="eg.InfiniteGrid.SquareLayout">
    <span class="title">
        <a href="eg.InfiniteGrid.SquareLayout.html">eg.InfiniteGrid.SquareLayout</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.InfiniteGrid.SquareLayout#append"><a href="eg.InfiniteGrid.SquareLayout.html#append">append</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.InfiniteGrid.SquareLayout#layout"><a href="eg.InfiniteGrid.SquareLayout.html#layout">layout</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.InfiniteGrid.SquareLayout#prepend"><a href="eg.InfiniteGrid.SquareLayout.html#prepend">prepend</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.InfiniteGrid.SquareLayout#setSize"><a href="eg.InfiniteGrid.SquareLayout.html#setSize">setSize</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    </ul>

    
</li>

        
            

<li class="item" data-name="eg.InfiniteGrid.PackingLayout">
    <span class="title">
        <a href="eg.InfiniteGrid.PackingLayout.html">eg.InfiniteGrid.PackingLayout</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.InfiniteGrid.PackingLayout#append"><a href="eg.InfiniteGrid.PackingLayout.html#append">append</a></li>
    
        <li data-name="eg.InfiniteGrid.PackingLayout#layout"><a href="eg.InfiniteGrid.PackingLayout.html#layout">layout</a></li>
    
        <li data-name="eg.InfiniteGrid.PackingLayout#prepend"><a href="eg.InfiniteGrid.PackingLayout.html#prepend">prepend</a></li>
    
        <li data-name="eg.InfiniteGrid.PackingLayout#setSize"><a href="eg.InfiniteGrid.PackingLayout.html#setSize">setSize</a></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    </ul>

    
</li>

        
            

<li class="item" data-name="eg.InfiniteGrid.JustifiedLayout">
    <span class="title">
        <a href="eg.InfiniteGrid.JustifiedLayout.html">eg.InfiniteGrid.JustifiedLayout</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.InfiniteGrid.JustifiedLayout#append"><a href="eg.InfiniteGrid.JustifiedLayout.html#append">append</a></li>
    
        <li data-name="eg.InfiniteGrid.JustifiedLayout#layout"><a href="eg.InfiniteGrid.JustifiedLayout.html#layout">layout</a></li>
    
        <li data-name="eg.InfiniteGrid.JustifiedLayout#prepend"><a href="eg.InfiniteGrid.JustifiedLayout.html#prepend">prepend</a></li>
    
        <li data-name="eg.InfiniteGrid.JustifiedLayout#setSize"><a href="eg.InfiniteGrid.JustifiedLayout.html#setSize">setSize</a></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    </ul>

    
</li>

        
            

<li class="item" data-name="eg.InfiniteGrid.GridLayout">
    <span class="title">
        <a href="eg.InfiniteGrid.GridLayout.html">eg.InfiniteGrid.GridLayout</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.InfiniteGrid.GridLayout#append"><a href="eg.InfiniteGrid.GridLayout.html#append">append</a></li>
    
        <li data-name="eg.InfiniteGrid.GridLayout#layout"><a href="eg.InfiniteGrid.GridLayout.html#layout">layout</a></li>
    
        <li data-name="eg.InfiniteGrid.GridLayout#prepend"><a href="eg.InfiniteGrid.GridLayout.html#prepend">prepend</a></li>
    
        <li data-name="eg.InfiniteGrid.GridLayout#setSize"><a href="eg.InfiniteGrid.GridLayout.html#setSize">setSize</a></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    </ul>

    
</li>

        
            

<li class="item" data-name="eg.InfiniteGrid.FrameLayout">
    <span class="title">
        <a href="eg.InfiniteGrid.FrameLayout.html">eg.InfiniteGrid.FrameLayout</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.InfiniteGrid.FrameLayout#append"><a href="eg.InfiniteGrid.FrameLayout.html#append">append</a></li>
    
        <li data-name="eg.InfiniteGrid.FrameLayout#layout"><a href="eg.InfiniteGrid.FrameLayout.html#layout">layout</a></li>
    
        <li data-name="eg.InfiniteGrid.FrameLayout#prepend"><a href="eg.InfiniteGrid.FrameLayout.html#prepend">prepend</a></li>
    
        <li data-name="eg.InfiniteGrid.FrameLayout#setSize"><a href="eg.InfiniteGrid.FrameLayout.html#setSize">setSize</a></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    </ul>

    
</li>

        
            

<li class="item" data-name="eg.InfiniteGrid">
    <span class="title">
        <a href="eg.InfiniteGrid.html">eg.InfiniteGrid</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    <span class="subtitle">Members</span>
    
        <li data-name="eg.InfiniteGrid.VERSION"><a href="eg.InfiniteGrid.html#.VERSION">VERSION</a></li>
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    <span class="subtitle">Typedefs</span>
    
        <li data-name="eg.InfiniteGrid.IErrorCallbackOptions"><a href="eg.InfiniteGrid.html#.IErrorCallbackOptions">IErrorCallbackOptions</a></li>
    
        <li data-name="eg.InfiniteGrid.IInfiniteGridItem"><a href="eg.InfiniteGrid.html#.IInfiniteGridItem">IInfiniteGridItem</a></li>
    
        <li data-name="eg.InfiniteGrid.IPosition"><a href="eg.InfiniteGrid.html#.IPosition">IPosition</a></li>
    
        <li data-name="eg.InfiniteGrid.ISize"><a href="eg.InfiniteGrid.html#.ISize">ISize</a></li>
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.InfiniteGrid#append"><a href="eg.InfiniteGrid.html#append">append</a></li>
    
        <li data-name="eg.InfiniteGrid#clear"><a href="eg.InfiniteGrid.html#clear">clear</a></li>
    
        <li data-name="eg.InfiniteGrid#destroy"><a href="eg.InfiniteGrid.html#destroy">destroy</a></li>
    
        <li data-name="eg.InfiniteGrid#endLoading"><a href="eg.InfiniteGrid.html#endLoading">endLoading</a></li>
    
        <li data-name="eg.InfiniteGrid#getGroupKeys"><a href="eg.InfiniteGrid.html#getGroupKeys">getGroupKeys</a></li>
    
        <li data-name="eg.InfiniteGrid#getItem"><a href="eg.InfiniteGrid.html#getItem">getItem</a></li>
    
        <li data-name="eg.InfiniteGrid#getItems"><a href="eg.InfiniteGrid.html#getItems">getItems</a></li>
    
        <li data-name="eg.InfiniteGrid#getLoadingBar"><a href="eg.InfiniteGrid.html#getLoadingBar">getLoadingBar</a></li>
    
        <li data-name="eg.InfiniteGrid#getStatus"><a href="eg.InfiniteGrid.html#getStatus">getStatus</a></li>
    
        <li data-name="eg.InfiniteGrid#hasOn"><a href="eg.InfiniteGrid.html#hasOn">hasOn</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.InfiniteGrid#isLoading"><a href="eg.InfiniteGrid.html#isLoading">isLoading</a></li>
    
        <li data-name="eg.InfiniteGrid#isProcessing"><a href="eg.InfiniteGrid.html#isProcessing">isProcessing</a></li>
    
        <li data-name="eg.InfiniteGrid#layout"><a href="eg.InfiniteGrid.html#layout">layout</a></li>
    
        <li data-name="eg.InfiniteGrid#moveTo"><a href="eg.InfiniteGrid.html#moveTo">moveTo</a></li>
    
        <li data-name="eg.InfiniteGrid#off"><a href="eg.InfiniteGrid.html#off">off</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.InfiniteGrid#on"><a href="eg.InfiniteGrid.html#on">on</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.InfiniteGrid#once"><a href="eg.InfiniteGrid.html#once">once</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.InfiniteGrid#prepend"><a href="eg.InfiniteGrid.html#prepend">prepend</a></li>
    
        <li data-name="eg.InfiniteGrid#remove"><a href="eg.InfiniteGrid.html#remove">remove</a></li>
    
        <li data-name="eg.InfiniteGrid#removeByIndex"><a href="eg.InfiniteGrid.html#removeByIndex">removeByIndex</a></li>
    
        <li data-name="eg.InfiniteGrid#setLayout"><a href="eg.InfiniteGrid.html#setLayout">setLayout</a></li>
    
        <li data-name="eg.InfiniteGrid#setLoadingBar"><a href="eg.InfiniteGrid.html#setLoadingBar">setLoadingBar</a></li>
    
        <li data-name="eg.InfiniteGrid#setStatus"><a href="eg.InfiniteGrid.html#setStatus">setStatus</a></li>
    
        <li data-name="eg.InfiniteGrid#startLoading"><a href="eg.InfiniteGrid.html#startLoading">startLoading</a></li>
    
        <li data-name="eg.InfiniteGrid#trigger"><a href="eg.InfiniteGrid.html#trigger">trigger</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="eg.InfiniteGrid#updateItem"><a href="eg.InfiniteGrid.html#updateItem">updateItem</a></li>
    
        <li data-name="eg.InfiniteGrid#updateItems"><a href="eg.InfiniteGrid.html#updateItems">updateItems</a></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    <span class="subtitle">Events</span>
    
        <li data-name="eg.InfiniteGrid#event:append"><a href="eg.InfiniteGrid.html#event:append">append</a></li>
    
        <li data-name="eg.InfiniteGrid#event:change"><a href="eg.InfiniteGrid.html#event:change">change</a></li>
    
        <li data-name="eg.InfiniteGrid#event:contentError"><a href="eg.InfiniteGrid.html#event:contentError">contentError</a></li>
    
        <li data-name="eg.InfiniteGrid#event:imageError"><a href="eg.InfiniteGrid.html#event:imageError">imageError</a></li>
    
        <li data-name="eg.InfiniteGrid#event:layoutComplete"><a href="eg.InfiniteGrid.html#event:layoutComplete">layoutComplete</a></li>
    
        <li data-name="eg.InfiniteGrid#event:prepend"><a href="eg.InfiniteGrid.html#event:prepend">prepend</a></li>
    
    </ul>

    
</li>

        
            

        
    
    </ul>
</div>

    <div class="main">
        <h1 class="page-title" data-filename="src_Parallax.ts.html">Source: src/Parallax.ts</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { ALIGN, isMobile, TRANSFORM } from "./consts";
import { $, isWindow, assign } from "./utils";
import { IAlign, IJQuery, PositionType, SizeType, InnerSizeType, ClientSizeType, IInfiniteGridItemElement, OffsetSizeType, IInfiniteGridItem } from "./types";

export interface IParallaxStyle {
	position: PositionType;
	size: SizeType;
	cammelSize: string;
	coordinate: string;
}
const style: {
	vertical: IParallaxStyle;
	horizontal: IParallaxStyle;
} = {
	vertical: { position: "top", size: "height", cammelSize: "Height", coordinate: "Y" },
	horizontal: { position: "left", size: "width", cammelSize: "Width", coordinate: "X" },
};
const { START, CENTER } = ALIGN;

/**
 * @classdesc Parallax is a displacement or difference in the apparent position of an object viewed along two different lines of sight. You can apply parallax by scrolling the image and speed of the item.
 * @ko Parallax는 서로 다른 두 개의 시선에서 바라본 물체의 외관상 위치의 변위 또는 차이입니다. 스크롤에 따라 이미지와 아이템의 속도를 차이를 줌으로써 parallax을 적용할 수 있습니다.
 * @class eg.Parallax
 * @param {Element|String} [root=window] Scrolling target. If you scroll in the body, set window. 스크롤하는 대상. 만약 body에서 스크롤하면 window로 설정한다.
 * @param {Object} [options] The option object of eg.Parallax module &lt;ko>eg.Parallax 모듈의 옵션 객체&lt;/ko>
 * @param {Boolean} [options.horizontal=false] Direction of the scroll movement (false: vertical, true: horizontal) &lt;ko>스크롤 이동 방향 (false: 세로방향, true: 가로방향)&lt;/ko>
 * @param {Element|String} [options.container=null] Container wrapping items. If root and container have no gaps, do not set option. &lt;ko> 아이템들을 감싸고 있는 컨테이너. 만약 root와 container간의 차이가 없으면, 옵션을 설정하지 않아도 된다.&lt;/ko>
 * @param {String} [options.selector="img"] The selector of the image to apply the parallax in the item &lt;ko> 아이템안에 있는 parallax를 적용할 이미지의 selector &lt;/ko>
 * @param {Boolean} [options.strength=1] Dimensions that indicate the sensitivity of parallax. The higher the strength, the faster.
 * @param {Boolean} [options.center=0] The middle point of parallax. The top is 1 and the bottom is -1. &lt;ko> parallax가 가운데로 오는 점. 상단이 1이고 하단이 -1이다. &lt;/ko>
 * @param {Boolean} [options.range=[-1, 1]] Range to apply the parallax. The top is 1 and the bottom is -1. &lt;ko> parallax가 적용되는 범위, 상단이 1이고 하단이 -1이다. &lt;/ko>
 * @param {Boolean} [options.align="start"] The alignment of the image in the item. ("start" : top or left, "center": middle) &lt;ko> 아이템안의 이미지의 정렬 &lt;/ko>
 * @example
```
&lt;script>
// isOverflowScroll: false
var parallax = new eg.Parallax(window, {
  container: ".container",
  selector: "img.parallax",
  strength: 0.8,
  center: 0,
  range: [-1, 1],
  align: "center",
  horizontal: true,
});

// isOverflowScroll: ture
var parallax = new eg.Parallax(".container", {
  selector: "img.parallax",
  strength: 0.8,
  center: 0,
  range: [-1, 1],
  align: "center",
  horizontal: true,
});

// item interface
var item = {
  // original size
  size: {
    width: 100,
    height: 100,
  },
  // view size
  rect: {
    top: 100,
    left: 100,
    width: 100,
    height: 100,
  }
};
&lt;/script>
```
 **/
class Parallax {
	public options: {
		container: HTMLElement;
		selector: string;
		strength: number;
		center: number;
		range: number[];
		align: IAlign[keyof IAlign];
		horizontal: boolean;
	};
	private _root: Window | HTMLElement;
	private _container: HTMLElement;
	private _rootSize: number;
	private _containerPosition: number;
	private _style: IParallaxStyle;
	constructor(
		root: Window | HTMLElement | IJQuery | string = window,
		options: Partial&lt;Parallax["options"]> = {}) {
		this.options = assign({
			container: null,
			selector: "img",
			strength: 1,
			center: 0,
			range: [-1, 1],
			align: START,
			horizontal: false,
		}, options);
		this._root = $(root);
		this._container = this.options.container &amp;&amp; $(this.options.container);
		this._rootSize = 0;
		this._containerPosition = 0;
		this._style = style[this.options.horizontal ? "horizontal" : "vertical"];
		this.resize();
	}
	/**
	 * As the browser is resized, the gaps between the root and the container and the size of the items are updated.
	 * @ko 브라우저의 크기가 변경됨으로 써 root와 container의 간격과 아이템들의 크기를 갱신한다.
	 * @method eg.Parallax#resize
	 * @param {Array} [items = []] Items to apply parallax. It does not apply if it is not in visible range. &lt;ko>parallax를 적용할 아이템들. 가시거리에 존재하지 않으면 적용이 안된다.&lt;/ko>
	 * @return {eg.Parallax} An instance of a module itself&lt;ko>모듈 자신의 인스턴스&lt;/ko>
	 * @example
  ```js
  window.addEventListener("resize", function (e) {
	parallax.resize(items);
  });
  ```
	 */
	public resize(items: IInfiniteGridItem[] = []) {
		const root = this._root;
		const container = this._container;
		const positionName = this._style.position;
		const sizeName = this._style.cammelSize;

		if (!container || root === container) {
			this._containerPosition = 0;
		} else {
			const rootRect = (isWindow(root) ? document.body : root).getBoundingClientRect();
			const containertRect = container.getBoundingClientRect();

			this._containerPosition = containertRect[positionName] - rootRect[positionName];
		}
		this._rootSize = isWindow(root) ?
			window[`inner${sizeName}` as InnerSizeType] ||
			document.documentElement[`client${sizeName}` as ClientSizeType] :
			root[`client${sizeName}` as ClientSizeType];

		if (isMobile &amp;&amp; isWindow(root)) {
			const bodyWidth = document.body.offsetWidth || document.documentElement.offsetWidth;
			const windowWidth = window.innerWidth;

			this._rootSize = this._rootSize / (bodyWidth / windowWidth);
		}
		items.forEach(item => {
			this._checkParallaxItem(item.el!);
		});

		return this;
	}
	/**
	 * Scrolls the image in the item by a parallax.
	 * @ko 스크롤하면 아이템안의 이미지를 시차적용시킨다.
	 * @method eg.Parallax#refresh
	 * @param {Array} [items = []] Items to apply parallax. It does not apply if it is not in visible range. &lt;ko>parallax를 적용할 아이템들. 가시거리에 존재하지 않으면 적용이 안된다.&lt;/ko>
	 * @param {Number} [scrollPositionStart = 0] The scroll position.
	 * @return {eg.Parallax} An instance of a module itself&lt;ko>모듈 자신의 인스턴스&lt;/ko>
	 * @example
  ```js
  document.body.addEventListener("scroll", function (e) {
	parallax.refresh(items, e.scrollTop);
  });
  ```
	 */
	public refresh(items: IInfiniteGridItem[] = [], scrollPositionStart = 0) {
		const styleNames = this._style;
		const positionName = styleNames.position;
		const coordinateName = styleNames.coordinate;
		const sizeName = styleNames.size;
		const options = this.options;
		const { strength, center, range, align } = options;
		const rootSize = this._rootSize;
		const scrollPositionEnd = scrollPositionStart + rootSize;
		const containerPosition = this._containerPosition;

		items.forEach(item => {
			if (!item.rect || !item.size || !item.el) {
				return;
			}
			const position = containerPosition + item.rect[positionName];
			const itemSize = item.rect[sizeName] || item.size[sizeName];

			// check item is in container.
			if (scrollPositionStart > position + itemSize ||
				scrollPositionEnd &lt; position) {
				return;
			}
			const el = item.el;

			if (!el.__IMAGE__) {
				this._checkParallaxItem(el);
			}
			if (el.__IMAGE__ === -1) {
				return;
			}
			const imageElement = el.__IMAGE__!;
			const boxElement = el.__BOX__!;
			const boxSize = boxElement.__SIZE__!;
			const imageSize = imageElement.__SIZE__!;

			// no parallax
			if (boxSize >= imageSize) {
				// remove transform style
				imageElement.style[TRANSFORM] = "";
				return;
			}

			// if area's position is center, ratio is 0.
			// if area is hidden at the top, ratio is 1.
			// if area is hidden at the bottom, ratio is -1.
			const imagePosition = position + boxSize / 2;
			let ratio = (scrollPositionStart + rootSize / 2 -
				(rootSize + boxSize) / 2 * center - imagePosition) /
				(rootSize + boxSize) * 2 * strength;

			// if ratio is out of the range of -1 and 1, show empty space.
			ratio = Math.max(Math.min(ratio, range[1]), range[0]);

			// dist is the position when thumnail's image is centered.
			const dist = (boxSize - imageSize) / 2;
			let translate = dist * (1 - ratio);

			if (align === CENTER) {
				translate -= dist;
			}

			imageElement.__TRANSLATE__ = translate;
			imageElement.__RATIO__ = ratio;
			imageElement.style[TRANSFORM] = `translate${coordinateName}(${translate}px)`;
		});
		return this;
	}
	private _checkParallaxItem(element: IInfiniteGridItemElement) {
		if (!element) {
			return;
		}
		const selector = this.options.selector;

		if (!element.__IMAGE__) {
			const img = element.querySelector&lt;IInfiniteGridItemElement>(selector);

			element.__IMAGE__ = img || -1;
			if (!img) {
				return;
			}
			element.__BOX__ = img.parentNode as IInfiniteGridItemElement;
		}
		if (element.__IMAGE__ === -1) {
			return;
		}
		const sizeName = this._style.cammelSize;

		element.__IMAGE__.__SIZE__ = element.__IMAGE__[`offset${sizeName}` as OffsetSizeType];
		element.__BOX__!.__SIZE__ = element.__BOX__![`offset${sizeName}` as OffsetSizeType];
	}
}

export default Parallax;
</code></pre>
        </article>
    </section>






        
        <!-- disqus code -->
        <div id="disqus_thread"></div>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        <!-- // disqus code -->
        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 0.3.10</a> on Fri Jul 23 2021 16:36:38 GMT+0900 (대한민국 표준시)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/main.js"></script>
</body>
</html>
